ARM GAS  /tmp/ccLBBjPb.s 			page 1


   1              		.cpu cortex-m4
   2              		.arch armv7e-m
   3              		.fpu fpv4-sp-d16
   4              		.eabi_attribute 27, 1
   5              		.eabi_attribute 28, 1
   6              		.eabi_attribute 20, 1
   7              		.eabi_attribute 21, 1
   8              		.eabi_attribute 23, 3
   9              		.eabi_attribute 24, 1
  10              		.eabi_attribute 25, 1
  11              		.eabi_attribute 26, 1
  12              		.eabi_attribute 30, 6
  13              		.eabi_attribute 34, 1
  14              		.eabi_attribute 18, 4
  15              		.file	"Receiver.c"
  16              		.text
  17              	.Ltext0:
  18              		.cfi_sections	.debug_frame
  19              		.file 1 "./Hardware/Src/Receiver.c"
  20              		.global	PPM_Data
  21              		.section	.bss.PPM_Data,"aw",%nobits
  22              		.align	2
  25              	PPM_Data:
  26 0000 00000000 		.space	18
  26      00000000 
  26      00000000 
  26      00000000 
  26      0000
  27              		.global	ppm_idx
  28              		.section	.bss.ppm_idx,"aw",%nobits
  29              		.align	2
  32              	ppm_idx:
  33 0000 00000000 		.space	4
  34              		.global	TIM1_CapPri
  35              		.section	.data.TIM1_CapPri,"aw"
  38              	TIM1_CapPri:
  39 0000 03       		.byte	3
  40              		.global	TIM1_UpdPri
  41              		.section	.data.TIM1_UpdPri,"aw"
  44              	TIM1_UpdPri:
  45 0000 04       		.byte	4
  46              		.section	.text.Receiver_Init,"ax",%progbits
  47              		.align	1
  48              		.global	Receiver_Init
  49              		.syntax unified
  50              		.thumb
  51              		.thumb_func
  53              	Receiver_Init:
  54              	.LFB123:
   1:./Hardware/Src/Receiver.c **** #include "Receiver.h"
   2:./Hardware/Src/Receiver.c **** #include "misc.h"
   3:./Hardware/Src/Receiver.c **** #include "stm32f4xx_rcc.h"
   4:./Hardware/Src/Receiver.c **** #include <stdint.h>
   5:./Hardware/Src/Receiver.c **** 
   6:./Hardware/Src/Receiver.c **** uint16_t PPM_Data[9] ={0};
   7:./Hardware/Src/Receiver.c ****  int ppm_idx = 0;
   8:./Hardware/Src/Receiver.c **** uint8_t TIM1_CapPri = 3;
ARM GAS  /tmp/ccLBBjPb.s 			page 2


   9:./Hardware/Src/Receiver.c **** uint8_t TIM1_UpdPri = 4;
  10:./Hardware/Src/Receiver.c **** void Receiver_Init(void)
  11:./Hardware/Src/Receiver.c **** {
  55              		.loc 1 11 1
  56              		.cfi_startproc
  57              		@ args = 0, pretend = 0, frame = 40
  58              		@ frame_needed = 1, uses_anonymous_args = 0
  59 0000 80B5     		push	{r7, lr}
  60              		.cfi_def_cfa_offset 8
  61              		.cfi_offset 7, -8
  62              		.cfi_offset 14, -4
  63 0002 8AB0     		sub	sp, sp, #40
  64              		.cfi_def_cfa_offset 48
  65 0004 00AF     		add	r7, sp, #0
  66              		.cfi_def_cfa_register 7
  12:./Hardware/Src/Receiver.c **** 	RCC_AHB1PeriphClockCmd(RCC_AHB1Periph_GPIOA,ENABLE);
  67              		.loc 1 12 2
  68 0006 0121     		movs	r1, #1
  69 0008 0120     		movs	r0, #1
  70 000a FFF7FEFF 		bl	RCC_AHB1PeriphClockCmd
  13:./Hardware/Src/Receiver.c **** 	RCC_APB2PeriphClockCmd(RCC_APB2Periph_TIM1,ENABLE);
  71              		.loc 1 13 2
  72 000e 0121     		movs	r1, #1
  73 0010 0120     		movs	r0, #1
  74 0012 FFF7FEFF 		bl	RCC_APB2PeriphClockCmd
  14:./Hardware/Src/Receiver.c **** 	
  15:./Hardware/Src/Receiver.c **** 	GPIO_InitTypeDef GPIO_InitStructure;
  16:./Hardware/Src/Receiver.c **** 	GPIO_InitStructure.GPIO_Pin=GPIO_Pin_8;//PA8
  75              		.loc 1 16 29
  76 0016 4FF48073 		mov	r3, #256
  77 001a 3B62     		str	r3, [r7, #32]
  17:./Hardware/Src/Receiver.c **** 	GPIO_InitStructure.GPIO_Speed=GPIO_Speed_50MHz;
  78              		.loc 1 17 31
  79 001c 0223     		movs	r3, #2
  80 001e 87F82530 		strb	r3, [r7, #37]
  18:./Hardware/Src/Receiver.c **** 	GPIO_InitStructure.GPIO_Mode=GPIO_Mode_AF;//
  81              		.loc 1 18 30
  82 0022 0223     		movs	r3, #2
  83 0024 87F82430 		strb	r3, [r7, #36]
  19:./Hardware/Src/Receiver.c **** 	GPIO_InitStructure.GPIO_PuPd=GPIO_PuPd_UP;
  84              		.loc 1 19 30
  85 0028 0123     		movs	r3, #1
  86 002a 87F82730 		strb	r3, [r7, #39]
  20:./Hardware/Src/Receiver.c **** 	GPIO_Init(GPIOA,&GPIO_InitStructure); 
  87              		.loc 1 20 2
  88 002e 07F12003 		add	r3, r7, #32
  89 0032 1946     		mov	r1, r3
  90 0034 3248     		ldr	r0, .L2
  91 0036 FFF7FEFF 		bl	GPIO_Init
  21:./Hardware/Src/Receiver.c **** 	GPIO_PinAFConfig(GPIOA, GPIO_PinSource8, GPIO_AF_TIM1);
  92              		.loc 1 21 2
  93 003a 0122     		movs	r2, #1
  94 003c 0821     		movs	r1, #8
  95 003e 3048     		ldr	r0, .L2
  96 0040 FFF7FEFF 		bl	GPIO_PinAFConfig
  22:./Hardware/Src/Receiver.c **** 	
  23:./Hardware/Src/Receiver.c **** 	TIM_InternalClockConfig(TIM1);
ARM GAS  /tmp/ccLBBjPb.s 			page 3


  97              		.loc 1 23 2
  98 0044 2F48     		ldr	r0, .L2+4
  99 0046 FFF7FEFF 		bl	TIM_InternalClockConfig
  24:./Hardware/Src/Receiver.c **** 	
  25:./Hardware/Src/Receiver.c **** 	TIM_TimeBaseInitTypeDef TIM_TimeBaseInitStructure;
  26:./Hardware/Src/Receiver.c **** 	
  27:./Hardware/Src/Receiver.c **** 	//å› ä¸ºé«˜çº§å®šæ—¶å™¨æœ‰å¾ˆå¤šè¦é…ç½®çš„ä¸œè¥¿ï¼Œæ‰€ä»¥ç”¨è¿™ä¸ªå‡½æ•°å…ˆæŠŠæˆ‘ä»¬ä¸ç”¨çš„
  28:./Hardware/Src/Receiver.c **** 	//ä¸œè¥¿é…ç½®ä¸ºç¼ºçœå€¼ï¼Œå†æ›´æ”¹æˆ‘ä»¬éœ€è¦é…ç½®çš„é€‰é¡¹
  29:./Hardware/Src/Receiver.c **** 	TIM_TimeBaseStructInit( & TIM_TimeBaseInitStructure);
 100              		.loc 1 29 2
 101 004a 07F11403 		add	r3, r7, #20
 102 004e 1846     		mov	r0, r3
 103 0050 FFF7FEFF 		bl	TIM_TimeBaseStructInit
  30:./Hardware/Src/Receiver.c **** 	
  31:./Hardware/Src/Receiver.c **** 	TIM_TimeBaseInitStructure.TIM_ClockDivision = TIM_CKD_DIV1;
 104              		.loc 1 31 46
 105 0054 0023     		movs	r3, #0
 106 0056 BB83     		strh	r3, [r7, #28]	@ movhi
  32:./Hardware/Src/Receiver.c **** 	TIM_TimeBaseInitStructure.TIM_CounterMode = TIM_CounterMode_Up;	//TIM
 107              		.loc 1 32 44
 108 0058 0023     		movs	r3, #0
 109 005a FB82     		strh	r3, [r7, #22]	@ movhi
  33:./Hardware/Src/Receiver.c **** 	TIM_TimeBaseInitStructure.TIM_Period = 65536-1;  //è¿™ä¸ªå€¼ï¼Œåªè¦æ˜¯ç”¨äºŽè¾“å…¥æ•èŽ·æµ‹é¢‘çŽ
 110              		.loc 1 33 39
 111 005c 4FF6FF73 		movw	r3, #65535
 112 0060 BB61     		str	r3, [r7, #24]
  34:./Hardware/Src/Receiver.c **** 	TIM_TimeBaseInitStructure.TIM_Prescaler = 2-1;  //ä»¥1Mhzè®¡æ•°
 113              		.loc 1 34 42
 114 0062 0123     		movs	r3, #1
 115 0064 BB82     		strh	r3, [r7, #20]	@ movhi
  35:./Hardware/Src/Receiver.c **** 	TIM_TimeBaseInitStructure.TIM_RepetitionCounter=0;
 116              		.loc 1 35 49
 117 0066 0023     		movs	r3, #0
 118 0068 BB77     		strb	r3, [r7, #30]
  36:./Hardware/Src/Receiver.c **** 	TIM_TimeBaseInit(TIM1, & TIM_TimeBaseInitStructure);
 119              		.loc 1 36 2
 120 006a 07F11403 		add	r3, r7, #20
 121 006e 1946     		mov	r1, r3
 122 0070 2448     		ldr	r0, .L2+4
 123 0072 FFF7FEFF 		bl	TIM_TimeBaseInit
  37:./Hardware/Src/Receiver.c **** 	
  38:./Hardware/Src/Receiver.c **** 	TIM_ICInitTypeDef TIM_ICInitStruct;
  39:./Hardware/Src/Receiver.c **** 	TIM_ICInitStruct.TIM_Channel=TIM_Channel_1;
 124              		.loc 1 39 30
 125 0076 0023     		movs	r3, #0
 126 0078 3B81     		strh	r3, [r7, #8]	@ movhi
  40:./Hardware/Src/Receiver.c **** 	TIM_ICInitStruct.TIM_ICFilter=0xF;
 127              		.loc 1 40 31
 128 007a 0F23     		movs	r3, #15
 129 007c 3B82     		strh	r3, [r7, #16]	@ movhi
  41:./Hardware/Src/Receiver.c **** 	TIM_ICInitStruct.TIM_ICPolarity=TIM_ICPolarity_Rising;
 130              		.loc 1 41 33
 131 007e 0023     		movs	r3, #0
 132 0080 7B81     		strh	r3, [r7, #10]	@ movhi
  42:./Hardware/Src/Receiver.c **** 	TIM_ICInitStruct.TIM_ICPrescaler=TIM_ICPSC_DIV1;
 133              		.loc 1 42 34
 134 0082 0023     		movs	r3, #0
ARM GAS  /tmp/ccLBBjPb.s 			page 4


 135 0084 FB81     		strh	r3, [r7, #14]	@ movhi
  43:./Hardware/Src/Receiver.c **** 	TIM_ICInitStruct.TIM_ICSelection=TIM_ICSelection_DirectTI;
 136              		.loc 1 43 34
 137 0086 0123     		movs	r3, #1
 138 0088 BB81     		strh	r3, [r7, #12]	@ movhi
  44:./Hardware/Src/Receiver.c **** 	TIM_ICInit(TIM1,&TIM_ICInitStruct);
 139              		.loc 1 44 2
 140 008a 07F10803 		add	r3, r7, #8
 141 008e 1946     		mov	r1, r3
 142 0090 1C48     		ldr	r0, .L2+4
 143 0092 FFF7FEFF 		bl	TIM_ICInit
  45:./Hardware/Src/Receiver.c **** 	
  46:./Hardware/Src/Receiver.c **** 	//å…¶å®žæŽ¥æ”¶æœºä¸éœ€è¦è¿™ä¸ªé€šé“ï¼Œå› ä¸ºæˆ‘åªéœ€æµ‹é‡ä¸Šå‡æ²¿å°±å¤Ÿäº†
  47:./Hardware/Src/Receiver.c **** 	TIM_ICInitStruct.TIM_Channel=TIM_Channel_2;
 144              		.loc 1 47 30
 145 0096 0423     		movs	r3, #4
 146 0098 3B81     		strh	r3, [r7, #8]	@ movhi
  48:./Hardware/Src/Receiver.c **** 	TIM_ICInitStruct.TIM_ICFilter=0xF;
 147              		.loc 1 48 31
 148 009a 0F23     		movs	r3, #15
 149 009c 3B82     		strh	r3, [r7, #16]	@ movhi
  49:./Hardware/Src/Receiver.c **** 	TIM_ICInitStruct.TIM_ICPolarity=TIM_ICPolarity_Falling;
 150              		.loc 1 49 33
 151 009e 0223     		movs	r3, #2
 152 00a0 7B81     		strh	r3, [r7, #10]	@ movhi
  50:./Hardware/Src/Receiver.c **** 	TIM_ICInitStruct.TIM_ICPrescaler=TIM_ICPSC_DIV1;
 153              		.loc 1 50 34
 154 00a2 0023     		movs	r3, #0
 155 00a4 FB81     		strh	r3, [r7, #14]	@ movhi
  51:./Hardware/Src/Receiver.c **** 	TIM_ICInitStruct.TIM_ICSelection=TIM_ICSelection_IndirectTI;
 156              		.loc 1 51 34
 157 00a6 0223     		movs	r3, #2
 158 00a8 BB81     		strh	r3, [r7, #12]	@ movhi
  52:./Hardware/Src/Receiver.c **** 	TIM_ICInit(TIM1,&TIM_ICInitStruct);
 159              		.loc 1 52 2
 160 00aa 07F10803 		add	r3, r7, #8
 161 00ae 1946     		mov	r1, r3
 162 00b0 1448     		ldr	r0, .L2+4
 163 00b2 FFF7FEFF 		bl	TIM_ICInit
  53:./Hardware/Src/Receiver.c **** 	
  54:./Hardware/Src/Receiver.c **** 	//é€‰æ‹©è¾“å…¥è§¦å‘æº
  55:./Hardware/Src/Receiver.c **** 	TIM_SelectInputTrigger(TIM1, TIM_TS_TI1FP1);
 164              		.loc 1 55 2
 165 00b6 5021     		movs	r1, #80
 166 00b8 1248     		ldr	r0, .L2+4
 167 00ba FFF7FEFF 		bl	TIM_SelectInputTrigger
  56:./Hardware/Src/Receiver.c **** 	TIM_SelectSlaveMode(TIM1,TIM_SlaveMode_Reset);
 168              		.loc 1 56 2
 169 00be 0421     		movs	r1, #4
 170 00c0 1048     		ldr	r0, .L2+4
 171 00c2 FFF7FEFF 		bl	TIM_SelectSlaveMode
  57:./Hardware/Src/Receiver.c **** 	
  58:./Hardware/Src/Receiver.c **** 	//ä»¥ä¸‹éƒ¨åˆ†ä¸ºä¸­æ–­é…ç½®
  59:./Hardware/Src/Receiver.c **** 	TIM_ITConfig(TIM1,TIM_IT_CC1,ENABLE);
 172              		.loc 1 59 2
 173 00c6 0122     		movs	r2, #1
 174 00c8 0221     		movs	r1, #2
ARM GAS  /tmp/ccLBBjPb.s 			page 5


 175 00ca 0E48     		ldr	r0, .L2+4
 176 00cc FFF7FEFF 		bl	TIM_ITConfig
  60:./Hardware/Src/Receiver.c **** 	
  61:./Hardware/Src/Receiver.c **** 	NVIC_PriorityGroupConfig(NVIC_PriorityGroup_2);
 177              		.loc 1 61 2
 178 00d0 4FF4A060 		mov	r0, #1280
 179 00d4 FFF7FEFF 		bl	NVIC_PriorityGroupConfig
  62:./Hardware/Src/Receiver.c **** 	NVIC_InitTypeDef NVIC_InitStructure;	
  63:./Hardware/Src/Receiver.c **** 	NVIC_InitStructure.NVIC_IRQChannel=TIM1_CC_IRQn;
 180              		.loc 1 63 36
 181 00d8 1B23     		movs	r3, #27
 182 00da 3B71     		strb	r3, [r7, #4]
  64:./Hardware/Src/Receiver.c **** 	NVIC_InitStructure.NVIC_IRQChannelCmd=ENABLE;
 183              		.loc 1 64 39
 184 00dc 0123     		movs	r3, #1
 185 00de FB71     		strb	r3, [r7, #7]
  65:./Hardware/Src/Receiver.c **** 	NVIC_InitStructure.NVIC_IRQChannelPreemptionPriority=2;
 186              		.loc 1 65 54
 187 00e0 0223     		movs	r3, #2
 188 00e2 7B71     		strb	r3, [r7, #5]
  66:./Hardware/Src/Receiver.c **** 	NVIC_InitStructure.NVIC_IRQChannelSubPriority=1;
 189              		.loc 1 66 47
 190 00e4 0123     		movs	r3, #1
 191 00e6 BB71     		strb	r3, [r7, #6]
  67:./Hardware/Src/Receiver.c **** 	NVIC_Init(&NVIC_InitStructure);
 192              		.loc 1 67 2
 193 00e8 3B1D     		adds	r3, r7, #4
 194 00ea 1846     		mov	r0, r3
 195 00ec FFF7FEFF 		bl	NVIC_Init
  68:./Hardware/Src/Receiver.c **** 	
  69:./Hardware/Src/Receiver.c **** 	//ä¸Šç”µ
  70:./Hardware/Src/Receiver.c **** 	TIM_Cmd(TIM1,ENABLE);
 196              		.loc 1 70 2
 197 00f0 0121     		movs	r1, #1
 198 00f2 0448     		ldr	r0, .L2+4
 199 00f4 FFF7FEFF 		bl	TIM_Cmd
  71:./Hardware/Src/Receiver.c **** 	
  72:./Hardware/Src/Receiver.c **** }
 200              		.loc 1 72 1
 201 00f8 00BF     		nop
 202 00fa 2837     		adds	r7, r7, #40
 203              		.cfi_def_cfa_offset 8
 204 00fc BD46     		mov	sp, r7
 205              		.cfi_def_cfa_register 13
 206              		@ sp needed
 207 00fe 80BD     		pop	{r7, pc}
 208              	.L3:
 209              		.align	2
 210              	.L2:
 211 0100 00000240 		.word	1073872896
 212 0104 00000140 		.word	1073807360
 213              		.cfi_endproc
 214              	.LFE123:
 216              		.section	.text.Receiver_Data,"ax",%progbits
 217              		.align	1
 218              		.global	Receiver_Data
 219              		.syntax unified
ARM GAS  /tmp/ccLBBjPb.s 			page 6


 220              		.thumb
 221              		.thumb_func
 223              	Receiver_Data:
 224              	.LFB124:
  73:./Hardware/Src/Receiver.c **** 
  74:./Hardware/Src/Receiver.c **** 
  75:./Hardware/Src/Receiver.c **** 
  76:./Hardware/Src/Receiver.c **** uint32_t Receiver_Data(void)
  77:./Hardware/Src/Receiver.c **** {
 225              		.loc 1 77 1
 226              		.cfi_startproc
 227              		@ args = 0, pretend = 0, frame = 0
 228              		@ frame_needed = 1, uses_anonymous_args = 0
 229 0000 80B5     		push	{r7, lr}
 230              		.cfi_def_cfa_offset 8
 231              		.cfi_offset 7, -8
 232              		.cfi_offset 14, -4
 233 0002 00AF     		add	r7, sp, #0
 234              		.cfi_def_cfa_register 7
  78:./Hardware/Src/Receiver.c **** 	return (TIM_GetCapture1(TIM1)+1);
 235              		.loc 1 78 10
 236 0004 0348     		ldr	r0, .L6
 237 0006 FFF7FEFF 		bl	TIM_GetCapture1
 238 000a 0346     		mov	r3, r0
 239              		.loc 1 78 31
 240 000c 0133     		adds	r3, r3, #1
  79:./Hardware/Src/Receiver.c **** }
 241              		.loc 1 79 1
 242 000e 1846     		mov	r0, r3
 243 0010 80BD     		pop	{r7, pc}
 244              	.L7:
 245 0012 00BF     		.align	2
 246              	.L6:
 247 0014 00000140 		.word	1073807360
 248              		.cfi_endproc
 249              	.LFE124:
 251              		.section	.text.My_Receiver_Init,"ax",%progbits
 252              		.align	1
 253              		.global	My_Receiver_Init
 254              		.syntax unified
 255              		.thumb
 256              		.thumb_func
 258              	My_Receiver_Init:
 259              	.LFB125:
  80:./Hardware/Src/Receiver.c **** 
  81:./Hardware/Src/Receiver.c **** void My_Receiver_Init(void)
  82:./Hardware/Src/Receiver.c **** {
 260              		.loc 1 82 1
 261              		.cfi_startproc
 262              		@ args = 0, pretend = 0, frame = 32
 263              		@ frame_needed = 1, uses_anonymous_args = 0
 264 0000 80B5     		push	{r7, lr}
 265              		.cfi_def_cfa_offset 8
 266              		.cfi_offset 7, -8
 267              		.cfi_offset 14, -4
 268 0002 88B0     		sub	sp, sp, #32
 269              		.cfi_def_cfa_offset 40
ARM GAS  /tmp/ccLBBjPb.s 			page 7


 270 0004 00AF     		add	r7, sp, #0
 271              		.cfi_def_cfa_register 7
  83:./Hardware/Src/Receiver.c ****   //æˆ‘çš„æ€è·¯æ˜¯åˆ©ç”¨ppmä¿¡å·20msä¸€æ¬¡çš„ç‰¹ç‚¹å¯¹CNTè¿›è¡Œæ¸…é›¶
  84:./Hardware/Src/Receiver.c ****   //å¼•è„šå¤ç”¨
  85:./Hardware/Src/Receiver.c ****     RCC_AHB1PeriphClockCmd(RCC_AHB1Periph_GPIOA,ENABLE);
 272              		.loc 1 85 5
 273 0006 0121     		movs	r1, #1
 274 0008 0120     		movs	r0, #1
 275 000a FFF7FEFF 		bl	RCC_AHB1PeriphClockCmd
  86:./Hardware/Src/Receiver.c **** 	GPIO_InitTypeDef GPIO_InitStructure;
  87:./Hardware/Src/Receiver.c **** 	GPIO_InitStructure.GPIO_Pin=GPIO_Pin_8;//PA8
 276              		.loc 1 87 29
 277 000e 4FF48073 		mov	r3, #256
 278 0012 7B61     		str	r3, [r7, #20]
  88:./Hardware/Src/Receiver.c **** 	GPIO_InitStructure.GPIO_Speed=GPIO_Speed_50MHz;
 279              		.loc 1 88 31
 280 0014 0223     		movs	r3, #2
 281 0016 7B76     		strb	r3, [r7, #25]
  89:./Hardware/Src/Receiver.c **** 	GPIO_InitStructure.GPIO_Mode=GPIO_Mode_AF;//
 282              		.loc 1 89 30
 283 0018 0223     		movs	r3, #2
 284 001a 3B76     		strb	r3, [r7, #24]
  90:./Hardware/Src/Receiver.c **** 	GPIO_InitStructure.GPIO_PuPd=GPIO_PuPd_UP;
 285              		.loc 1 90 30
 286 001c 0123     		movs	r3, #1
 287 001e FB76     		strb	r3, [r7, #27]
  91:./Hardware/Src/Receiver.c **** 	GPIO_Init(GPIOA,&GPIO_InitStructure); 
 288              		.loc 1 91 2
 289 0020 07F11403 		add	r3, r7, #20
 290 0024 1946     		mov	r1, r3
 291 0026 3248     		ldr	r0, .L9
 292 0028 FFF7FEFF 		bl	GPIO_Init
  92:./Hardware/Src/Receiver.c **** 	GPIO_PinAFConfig(GPIOA, GPIO_PinSource8, GPIO_AF_TIM1);
 293              		.loc 1 92 2
 294 002c 0122     		movs	r2, #1
 295 002e 0821     		movs	r1, #8
 296 0030 2F48     		ldr	r0, .L9
 297 0032 FFF7FEFF 		bl	GPIO_PinAFConfig
  93:./Hardware/Src/Receiver.c ****  //ç„¶åŽæ˜¯TIMæ—¶åŸºå•å…ƒåˆå§‹åŒ–
  94:./Hardware/Src/Receiver.c ****     RCC->APB2ENR |= RCC_APB2ENR_TIM1EN;
 298              		.loc 1 94 8
 299 0036 2F4B     		ldr	r3, .L9+4
 300 0038 5B6C     		ldr	r3, [r3, #68]
 301 003a 2E4A     		ldr	r2, .L9+4
 302              		.loc 1 94 18
 303 003c 43F00103 		orr	r3, r3, #1
 304 0040 5364     		str	r3, [r2, #68]
  95:./Hardware/Src/Receiver.c **** 	RCC_ClocksTypeDef ClkFre;
  96:./Hardware/Src/Receiver.c **** 	RCC_GetClocksFreq(&ClkFre);
 305              		.loc 1 96 2
 306 0042 3B1D     		adds	r3, r7, #4
 307 0044 1846     		mov	r0, r3
 308 0046 FFF7FEFF 		bl	RCC_GetClocksFreq
  97:./Hardware/Src/Receiver.c **** 	uint32_t PCLK2 = ClkFre.PCLK2_Frequency;
 309              		.loc 1 97 11
 310 004a 3B69     		ldr	r3, [r7, #16]
 311 004c FB61     		str	r3, [r7, #28]
ARM GAS  /tmp/ccLBBjPb.s 			page 8


  98:./Hardware/Src/Receiver.c **** 	TIM1->PSC = (PCLK2/1000000)-1;      //æ¯0.001msè®¡æ•°ä¸€æ¬¡
 312              		.loc 1 98 20
 313 004e FB69     		ldr	r3, [r7, #28]
 314 0050 294A     		ldr	r2, .L9+8
 315 0052 A2FB0323 		umull	r2, r3, r2, r3
 316 0056 9B0C     		lsrs	r3, r3, #18
 317              		.loc 1 98 29
 318 0058 9BB2     		uxth	r3, r3
 319              		.loc 1 98 6
 320 005a 284A     		ldr	r2, .L9+12
 321              		.loc 1 98 29
 322 005c 013B     		subs	r3, r3, #1
 323 005e 9BB2     		uxth	r3, r3
 324              		.loc 1 98 12
 325 0060 1385     		strh	r3, [r2, #40]	@ movhi
  99:./Hardware/Src/Receiver.c **** 	TIM1->ARR = 2100;         //2.1mså‘ç”Ÿä¸Šæº¢ï¼Œäº§ç”Ÿæ›´æ–°ä¸­æ–­ï¼Œä¸€è·¯ppmä¿¡å·å®Œ
 326              		.loc 1 99 6
 327 0062 264B     		ldr	r3, .L9+12
 328              		.loc 1 99 12
 329 0064 40F63402 		movw	r2, #2100
 330 0068 DA62     		str	r2, [r3, #44]
 100:./Hardware/Src/Receiver.c **** 	TIM1->CCMR1 |= 0x01;      //CC1è¾“å…¥ï¼ŒIC1->TI1
 331              		.loc 1 100 6
 332 006a 244B     		ldr	r3, .L9+12
 333 006c 1B8B     		ldrh	r3, [r3, #24]	@ movhi
 334 006e 9BB2     		uxth	r3, r3
 335 0070 224A     		ldr	r2, .L9+12
 336              		.loc 1 100 14
 337 0072 43F00103 		orr	r3, r3, #1
 338 0076 9BB2     		uxth	r3, r3
 339 0078 1383     		strh	r3, [r2, #24]	@ movhi
 101:./Hardware/Src/Receiver.c **** 	TIM1->CCER |= 0x01 | 0x00;//ä½¿èƒ½æ•èŽ·ï¼Œä¸Šå‡æ²¿è§¦å‘
 340              		.loc 1 101 6
 341 007a 204B     		ldr	r3, .L9+12
 342 007c 1B8C     		ldrh	r3, [r3, #32]	@ movhi
 343 007e 9BB2     		uxth	r3, r3
 344 0080 1E4A     		ldr	r2, .L9+12
 345              		.loc 1 101 13
 346 0082 43F00103 		orr	r3, r3, #1
 347 0086 9BB2     		uxth	r3, r3
 348 0088 1384     		strh	r3, [r2, #32]	@ movhi
 102:./Hardware/Src/Receiver.c **** 	TIM1->DIER |= 0x01 |0x02; //ä½¿èƒ½è¾“å…¥æ•èŽ·ä¸­æ–­å’Œæ›´æ–°ä¸­æ–­
 349              		.loc 1 102 6
 350 008a 1C4B     		ldr	r3, .L9+12
 351 008c 9B89     		ldrh	r3, [r3, #12]	@ movhi
 352 008e 9BB2     		uxth	r3, r3
 353 0090 1A4A     		ldr	r2, .L9+12
 354              		.loc 1 102 13
 355 0092 43F00303 		orr	r3, r3, #3
 356 0096 9BB2     		uxth	r3, r3
 357 0098 9381     		strh	r3, [r2, #12]	@ movhi
 103:./Hardware/Src/Receiver.c **** 	TIM1->CR1 |= 0x01;        //ä½¿èƒ½è®¡æ•°å™¨
 358              		.loc 1 103 6
 359 009a 184B     		ldr	r3, .L9+12
 360 009c 1B88     		ldrh	r3, [r3]	@ movhi
 361 009e 9BB2     		uxth	r3, r3
 362 00a0 164A     		ldr	r2, .L9+12
ARM GAS  /tmp/ccLBBjPb.s 			page 9


 363              		.loc 1 103 12
 364 00a2 43F00103 		orr	r3, r3, #1
 365 00a6 9BB2     		uxth	r3, r3
 366 00a8 1380     		strh	r3, [r2]	@ movhi
 104:./Hardware/Src/Receiver.c **** //ä¸­æ–­è®¾ç½®
 105:./Hardware/Src/Receiver.c **** 	NVIC_PriorityGroupConfig(NVIC_PriorityGroup_4);
 367              		.loc 1 105 2
 368 00aa 4FF44070 		mov	r0, #768
 369 00ae FFF7FEFF 		bl	NVIC_PriorityGroupConfig
 106:./Hardware/Src/Receiver.c **** 	NVIC->IP[TIM1_CC_IRQn] = TIM1_CapPri<<0x04;
 370              		.loc 1 106 38
 371 00b2 134B     		ldr	r3, .L9+16
 372 00b4 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 373              		.loc 1 106 6
 374 00b6 134A     		ldr	r2, .L9+20
 375              		.loc 1 106 38
 376 00b8 1B01     		lsls	r3, r3, #4
 377 00ba DBB2     		uxtb	r3, r3
 378              		.loc 1 106 25
 379 00bc 82F81B33 		strb	r3, [r2, #795]
 107:./Hardware/Src/Receiver.c **** 	NVIC->IP[TIM1_UP_TIM10_IRQn] = TIM1_UpdPri<<0x04;
 380              		.loc 1 107 44
 381 00c0 114B     		ldr	r3, .L9+24
 382 00c2 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 383              		.loc 1 107 6
 384 00c4 0F4A     		ldr	r2, .L9+20
 385              		.loc 1 107 44
 386 00c6 1B01     		lsls	r3, r3, #4
 387 00c8 DBB2     		uxtb	r3, r3
 388              		.loc 1 107 31
 389 00ca 82F81933 		strb	r3, [r2, #793]
 108:./Hardware/Src/Receiver.c **** 	NVIC->ISER[TIM1_CC_IRQn>>5] |= 0x01 << (TIM1_CC_IRQn&0x1F);
 390              		.loc 1 108 6
 391 00ce 0D4B     		ldr	r3, .L9+20
 392              		.loc 1 108 12
 393 00d0 1B68     		ldr	r3, [r3]
 394              		.loc 1 108 6
 395 00d2 0C4A     		ldr	r2, .L9+20
 396              		.loc 1 108 30
 397 00d4 43F00063 		orr	r3, r3, #134217728
 398 00d8 1360     		str	r3, [r2]
 109:./Hardware/Src/Receiver.c **** 	NVIC->ISER[TIM1_UP_TIM10_IRQn>>5] |= 0x01 << (TIM1_UP_TIM10_IRQn&0x1F); 
 399              		.loc 1 109 6
 400 00da 0A4B     		ldr	r3, .L9+20
 401              		.loc 1 109 12
 402 00dc 1B68     		ldr	r3, [r3]
 403              		.loc 1 109 6
 404 00de 094A     		ldr	r2, .L9+20
 405              		.loc 1 109 36
 406 00e0 43F00073 		orr	r3, r3, #33554432
 407 00e4 1360     		str	r3, [r2]
 110:./Hardware/Src/Receiver.c **** }
 408              		.loc 1 110 1
 409 00e6 00BF     		nop
 410 00e8 2037     		adds	r7, r7, #32
 411              		.cfi_def_cfa_offset 8
 412 00ea BD46     		mov	sp, r7
ARM GAS  /tmp/ccLBBjPb.s 			page 10


 413              		.cfi_def_cfa_register 13
 414              		@ sp needed
 415 00ec 80BD     		pop	{r7, pc}
 416              	.L10:
 417 00ee 00BF     		.align	2
 418              	.L9:
 419 00f0 00000240 		.word	1073872896
 420 00f4 00380240 		.word	1073887232
 421 00f8 83DE1B43 		.word	1125899907
 422 00fc 00000140 		.word	1073807360
 423 0100 00000000 		.word	TIM1_CapPri
 424 0104 00E100E0 		.word	-536813312
 425 0108 00000000 		.word	TIM1_UpdPri
 426              		.cfi_endproc
 427              	.LFE125:
 429              		.section	.text.TIM1_CC_IRQHandler,"ax",%progbits
 430              		.align	1
 431              		.global	TIM1_CC_IRQHandler
 432              		.syntax unified
 433              		.thumb
 434              		.thumb_func
 436              	TIM1_CC_IRQHandler:
 437              	.LFB126:
 111:./Hardware/Src/Receiver.c **** void TIM1_CC_IRQHandler(void){
 438              		.loc 1 111 30
 439              		.cfi_startproc
 440              		@ args = 0, pretend = 0, frame = 0
 441              		@ frame_needed = 1, uses_anonymous_args = 0
 442              		@ link register save eliminated.
 443 0000 80B4     		push	{r7}
 444              		.cfi_def_cfa_offset 4
 445              		.cfi_offset 7, -4
 446 0002 00AF     		add	r7, sp, #0
 447              		.cfi_def_cfa_register 7
 112:./Hardware/Src/Receiver.c **** 	// if(ppm_idx<8){
 113:./Hardware/Src/Receiver.c **** 	PPM_Data[ppm_idx++] = TIM1->CCR1;
 448              		.loc 1 113 28
 449 0004 094B     		ldr	r3, .L12
 450 0006 586B     		ldr	r0, [r3, #52]
 451              		.loc 1 113 18
 452 0008 094B     		ldr	r3, .L12+4
 453 000a 1B68     		ldr	r3, [r3]
 454 000c 5A1C     		adds	r2, r3, #1
 455 000e 0849     		ldr	r1, .L12+4
 456 0010 0A60     		str	r2, [r1]
 457              		.loc 1 113 22
 458 0012 81B2     		uxth	r1, r0
 459 0014 074A     		ldr	r2, .L12+8
 460 0016 22F81310 		strh	r1, [r2, r3, lsl #1]	@ movhi
 114:./Hardware/Src/Receiver.c **** 	// if(PPM_Data[ppm_idx-1]>3000) ppm_idx =0;
 115:./Hardware/Src/Receiver.c **** 	// if( PPM_Data[ppm_idx] > 20) ppm_idx =0;
 116:./Hardware/Src/Receiver.c **** 	// ppm_idx ++;
 117:./Hardware/Src/Receiver.c **** 	// }
 118:./Hardware/Src/Receiver.c **** 	TIM1->CNT = 0;
 461              		.loc 1 118 6
 462 001a 044B     		ldr	r3, .L12
 463              		.loc 1 118 12
ARM GAS  /tmp/ccLBBjPb.s 			page 11


 464 001c 0022     		movs	r2, #0
 465 001e 5A62     		str	r2, [r3, #36]
 119:./Hardware/Src/Receiver.c **** }
 466              		.loc 1 119 1
 467 0020 00BF     		nop
 468 0022 BD46     		mov	sp, r7
 469              		.cfi_def_cfa_register 13
 470              		@ sp needed
 471 0024 5DF8047B 		ldr	r7, [sp], #4
 472              		.cfi_restore 7
 473              		.cfi_def_cfa_offset 0
 474 0028 7047     		bx	lr
 475              	.L13:
 476 002a 00BF     		.align	2
 477              	.L12:
 478 002c 00000140 		.word	1073807360
 479 0030 00000000 		.word	ppm_idx
 480 0034 00000000 		.word	PPM_Data
 481              		.cfi_endproc
 482              	.LFE126:
 484              		.section	.text.TIM1_UP_TIM10_IRQHandler,"ax",%progbits
 485              		.align	1
 486              		.global	TIM1_UP_TIM10_IRQHandler
 487              		.syntax unified
 488              		.thumb
 489              		.thumb_func
 491              	TIM1_UP_TIM10_IRQHandler:
 492              	.LFB127:
 120:./Hardware/Src/Receiver.c **** 
 121:./Hardware/Src/Receiver.c **** void TIM1_UP_TIM10_IRQHandler(void){
 493              		.loc 1 121 36
 494              		.cfi_startproc
 495              		@ args = 0, pretend = 0, frame = 0
 496              		@ frame_needed = 1, uses_anonymous_args = 0
 497              		@ link register save eliminated.
 498 0000 80B4     		push	{r7}
 499              		.cfi_def_cfa_offset 4
 500              		.cfi_offset 7, -4
 501 0002 00AF     		add	r7, sp, #0
 502              		.cfi_def_cfa_register 7
 122:./Hardware/Src/Receiver.c **** 	 ppm_idx = 0;
 503              		.loc 1 122 11
 504 0004 094B     		ldr	r3, .L15
 505 0006 0022     		movs	r2, #0
 506 0008 1A60     		str	r2, [r3]
 123:./Hardware/Src/Receiver.c **** 	 TIM1->CNT = 0;
 507              		.loc 1 123 7
 508 000a 094B     		ldr	r3, .L15+4
 509              		.loc 1 123 13
 510 000c 0022     		movs	r2, #0
 511 000e 5A62     		str	r2, [r3, #36]
 124:./Hardware/Src/Receiver.c **** 	TIM1->SR &= ~0x01;   //æ¸…é›¶æ›´æ–°ä¸­æ–­æ ‡å¿—
 512              		.loc 1 124 6
 513 0010 074B     		ldr	r3, .L15+4
 514 0012 1B8A     		ldrh	r3, [r3, #16]	@ movhi
 515 0014 9BB2     		uxth	r3, r3
 516 0016 064A     		ldr	r2, .L15+4
ARM GAS  /tmp/ccLBBjPb.s 			page 12


 517              		.loc 1 124 11
 518 0018 23F00103 		bic	r3, r3, #1
 519 001c 9BB2     		uxth	r3, r3
 520 001e 1382     		strh	r3, [r2, #16]	@ movhi
 125:./Hardware/Src/Receiver.c **** }
 521              		.loc 1 125 1
 522 0020 00BF     		nop
 523 0022 BD46     		mov	sp, r7
 524              		.cfi_def_cfa_register 13
 525              		@ sp needed
 526 0024 5DF8047B 		ldr	r7, [sp], #4
 527              		.cfi_restore 7
 528              		.cfi_def_cfa_offset 0
 529 0028 7047     		bx	lr
 530              	.L16:
 531 002a 00BF     		.align	2
 532              	.L15:
 533 002c 00000000 		.word	ppm_idx
 534 0030 00000140 		.word	1073807360
 535              		.cfi_endproc
 536              	.LFE127:
 538              		.text
 539              	.Letext0:
 540              		.file 2 "/usr/lib/gcc/arm-none-eabi/12.2.1/include/stdint.h"
 541              		.file 3 "./Start/core_cm4.h"
 542              		.file 4 "./Start/stm32f4xx.h"
 543              		.file 5 "./Lib/inc/stm32f4xx_gpio.h"
 544              		.file 6 "./Lib/inc/stm32f4xx_rcc.h"
 545              		.file 7 "./Lib/inc/stm32f4xx_tim.h"
 546              		.file 8 "./Lib/inc/misc.h"
 547              		.file 9 "./Hardware/Inc/Receiver.h"
ARM GAS  /tmp/ccLBBjPb.s 			page 13


DEFINED SYMBOLS
                            *ABS*:0000000000000000 Receiver.c
     /tmp/ccLBBjPb.s:25     .bss.PPM_Data:0000000000000000 PPM_Data
     /tmp/ccLBBjPb.s:22     .bss.PPM_Data:0000000000000000 $d
     /tmp/ccLBBjPb.s:32     .bss.ppm_idx:0000000000000000 ppm_idx
     /tmp/ccLBBjPb.s:29     .bss.ppm_idx:0000000000000000 $d
     /tmp/ccLBBjPb.s:38     .data.TIM1_CapPri:0000000000000000 TIM1_CapPri
     /tmp/ccLBBjPb.s:44     .data.TIM1_UpdPri:0000000000000000 TIM1_UpdPri
     /tmp/ccLBBjPb.s:47     .text.Receiver_Init:0000000000000000 $t
     /tmp/ccLBBjPb.s:53     .text.Receiver_Init:0000000000000000 Receiver_Init
     /tmp/ccLBBjPb.s:211    .text.Receiver_Init:0000000000000100 $d
     /tmp/ccLBBjPb.s:217    .text.Receiver_Data:0000000000000000 $t
     /tmp/ccLBBjPb.s:223    .text.Receiver_Data:0000000000000000 Receiver_Data
     /tmp/ccLBBjPb.s:247    .text.Receiver_Data:0000000000000014 $d
     /tmp/ccLBBjPb.s:252    .text.My_Receiver_Init:0000000000000000 $t
     /tmp/ccLBBjPb.s:258    .text.My_Receiver_Init:0000000000000000 My_Receiver_Init
     /tmp/ccLBBjPb.s:419    .text.My_Receiver_Init:00000000000000f0 $d
     /tmp/ccLBBjPb.s:430    .text.TIM1_CC_IRQHandler:0000000000000000 $t
     /tmp/ccLBBjPb.s:436    .text.TIM1_CC_IRQHandler:0000000000000000 TIM1_CC_IRQHandler
     /tmp/ccLBBjPb.s:478    .text.TIM1_CC_IRQHandler:000000000000002c $d
     /tmp/ccLBBjPb.s:485    .text.TIM1_UP_TIM10_IRQHandler:0000000000000000 $t
     /tmp/ccLBBjPb.s:491    .text.TIM1_UP_TIM10_IRQHandler:0000000000000000 TIM1_UP_TIM10_IRQHandler
     /tmp/ccLBBjPb.s:533    .text.TIM1_UP_TIM10_IRQHandler:000000000000002c $d

UNDEFINED SYMBOLS
RCC_AHB1PeriphClockCmd
RCC_APB2PeriphClockCmd
GPIO_Init
GPIO_PinAFConfig
TIM_InternalClockConfig
TIM_TimeBaseStructInit
TIM_TimeBaseInit
TIM_ICInit
TIM_SelectInputTrigger
TIM_SelectSlaveMode
TIM_ITConfig
NVIC_PriorityGroupConfig
NVIC_Init
TIM_Cmd
TIM_GetCapture1
RCC_GetClocksFreq
