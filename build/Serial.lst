ARM GAS  /tmp/cctTD7N5.s 			page 1


   1              		.cpu cortex-m4
   2              		.arch armv7e-m
   3              		.fpu fpv4-sp-d16
   4              		.eabi_attribute 27, 1
   5              		.eabi_attribute 28, 1
   6              		.eabi_attribute 20, 1
   7              		.eabi_attribute 21, 1
   8              		.eabi_attribute 23, 3
   9              		.eabi_attribute 24, 1
  10              		.eabi_attribute 25, 1
  11              		.eabi_attribute 26, 1
  12              		.eabi_attribute 30, 6
  13              		.eabi_attribute 34, 1
  14              		.eabi_attribute 18, 4
  15              		.file	"Serial.c"
  16              		.text
  17              	.Ltext0:
  18              		.cfi_sections	.debug_frame
  19              		.file 1 "./Hardware/Src/Serial.c"
  20              		.section	.text.uart_init,"ax",%progbits
  21              		.align	1
  22              		.global	uart_init
  23              		.syntax unified
  24              		.thumb
  25              		.thumb_func
  27              	uart_init:
  28              	.LFB123:
   1:./Hardware/Src/Serial.c **** #include "IMU.h"
   2:./Hardware/Src/Serial.c **** #include "Receiver.h"
   3:./Hardware/Src/Serial.c **** #include "stm32f4xx.h"
   4:./Hardware/Src/Serial.c **** #include "Serial.h"
   5:./Hardware/Src/Serial.c **** #include <stdint.h>
   6:./Hardware/Src/Serial.c **** void MY_UART_Send(uint8_t *string, uint8_t size);
   7:./Hardware/Src/Serial.c **** void uart_init(){
  29              		.loc 1 7 17
  30              		.cfi_startproc
  31              		@ args = 0, pretend = 0, frame = 24
  32              		@ frame_needed = 1, uses_anonymous_args = 0
  33 0000 80B5     		push	{r7, lr}
  34              		.cfi_def_cfa_offset 8
  35              		.cfi_offset 7, -8
  36              		.cfi_offset 14, -4
  37 0002 86B0     		sub	sp, sp, #24
  38              		.cfi_def_cfa_offset 32
  39 0004 00AF     		add	r7, sp, #0
  40              		.cfi_def_cfa_register 7
   8:./Hardware/Src/Serial.c **** GPIO_InitTypeDef GPIO_InitStructure;
   9:./Hardware/Src/Serial.c **** USART_InitTypeDef USART_InitStructure;
  10:./Hardware/Src/Serial.c **** RCC_AHB1PeriphClockCmd(RCC_AHB1Periph_GPIOB,ENABLE); 
  41              		.loc 1 10 1
  42 0006 0121     		movs	r1, #1
  43 0008 0220     		movs	r0, #2
  44 000a FFF7FEFF 		bl	RCC_AHB1PeriphClockCmd
  11:./Hardware/Src/Serial.c **** 
  12:./Hardware/Src/Serial.c **** RCC_APB2PeriphClockCmd(RCC_APB2Periph_USART1,ENABLE);
  45              		.loc 1 12 1
  46 000e 0121     		movs	r1, #1
ARM GAS  /tmp/cctTD7N5.s 			page 2


  47 0010 1020     		movs	r0, #16
  48 0012 FFF7FEFF 		bl	RCC_APB2PeriphClockCmd
  13:./Hardware/Src/Serial.c **** 
  14:./Hardware/Src/Serial.c **** GPIO_PinAFConfig(GPIOB,GPIO_PinSource6,GPIO_AF_USART1);
  49              		.loc 1 14 1
  50 0016 0722     		movs	r2, #7
  51 0018 0621     		movs	r1, #6
  52 001a 1648     		ldr	r0, .L2
  53 001c FFF7FEFF 		bl	GPIO_PinAFConfig
  15:./Hardware/Src/Serial.c **** 
  16:./Hardware/Src/Serial.c **** 
  17:./Hardware/Src/Serial.c **** //USART1 PB6 PB7
  18:./Hardware/Src/Serial.c **** GPIO_InitStructure.GPIO_Pin = GPIO_Pin_6 ; 
  54              		.loc 1 18 29
  55 0020 4023     		movs	r3, #64
  56 0022 3B61     		str	r3, [r7, #16]
  19:./Hardware/Src/Serial.c **** GPIO_InitStructure.GPIO_Mode = GPIO_Mode_AF;
  57              		.loc 1 19 30
  58 0024 0223     		movs	r3, #2
  59 0026 3B75     		strb	r3, [r7, #20]
  20:./Hardware/Src/Serial.c **** GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz; 
  60              		.loc 1 20 31
  61 0028 0223     		movs	r3, #2
  62 002a 7B75     		strb	r3, [r7, #21]
  21:./Hardware/Src/Serial.c **** GPIO_InitStructure.GPIO_OType = GPIO_OType_PP; 
  63              		.loc 1 21 31
  64 002c 0023     		movs	r3, #0
  65 002e BB75     		strb	r3, [r7, #22]
  22:./Hardware/Src/Serial.c **** GPIO_InitStructure.GPIO_PuPd = GPIO_PuPd_UP; 
  66              		.loc 1 22 30
  67 0030 0123     		movs	r3, #1
  68 0032 FB75     		strb	r3, [r7, #23]
  23:./Hardware/Src/Serial.c **** GPIO_Init(GPIOB,&GPIO_InitStructure); 
  69              		.loc 1 23 1
  70 0034 07F11003 		add	r3, r7, #16
  71 0038 1946     		mov	r1, r3
  72 003a 0E48     		ldr	r0, .L2
  73 003c FFF7FEFF 		bl	GPIO_Init
  24:./Hardware/Src/Serial.c **** 
  25:./Hardware/Src/Serial.c **** USART_InitStructure.USART_BaudRate = 9600;
  74              		.loc 1 25 36
  75 0040 4FF41653 		mov	r3, #9600
  76 0044 3B60     		str	r3, [r7]
  26:./Hardware/Src/Serial.c **** USART_InitStructure.USART_WordLength = USART_WordLength_8b;
  77              		.loc 1 26 38
  78 0046 0023     		movs	r3, #0
  79 0048 BB80     		strh	r3, [r7, #4]	@ movhi
  27:./Hardware/Src/Serial.c **** USART_InitStructure.USART_StopBits = USART_StopBits_1;
  80              		.loc 1 27 36
  81 004a 0023     		movs	r3, #0
  82 004c FB80     		strh	r3, [r7, #6]	@ movhi
  28:./Hardware/Src/Serial.c **** USART_InitStructure.USART_Parity = USART_Parity_No;
  83              		.loc 1 28 34
  84 004e 0023     		movs	r3, #0
  85 0050 3B81     		strh	r3, [r7, #8]	@ movhi
  29:./Hardware/Src/Serial.c **** USART_InitStructure.USART_HardwareFlowControl =USART_HardwareFlowControl_None;
  86              		.loc 1 29 47
ARM GAS  /tmp/cctTD7N5.s 			page 3


  87 0052 0023     		movs	r3, #0
  88 0054 BB81     		strh	r3, [r7, #12]	@ movhi
  30:./Hardware/Src/Serial.c **** USART_InitStructure.USART_Mode = USART_Mode_Tx;
  89              		.loc 1 30 32
  90 0056 0823     		movs	r3, #8
  91 0058 7B81     		strh	r3, [r7, #10]	@ movhi
  31:./Hardware/Src/Serial.c **** USART_Init(USART1, &USART_InitStructure); 
  92              		.loc 1 31 1
  93 005a 3B46     		mov	r3, r7
  94 005c 1946     		mov	r1, r3
  95 005e 0648     		ldr	r0, .L2+4
  96 0060 FFF7FEFF 		bl	USART_Init
  32:./Hardware/Src/Serial.c **** USART_Cmd(USART1, ENABLE); 
  97              		.loc 1 32 1
  98 0064 0121     		movs	r1, #1
  99 0066 0448     		ldr	r0, .L2+4
 100 0068 FFF7FEFF 		bl	USART_Cmd
  33:./Hardware/Src/Serial.c **** 
  34:./Hardware/Src/Serial.c **** 
  35:./Hardware/Src/Serial.c **** }
 101              		.loc 1 35 1
 102 006c 00BF     		nop
 103 006e 1837     		adds	r7, r7, #24
 104              		.cfi_def_cfa_offset 8
 105 0070 BD46     		mov	sp, r7
 106              		.cfi_def_cfa_register 13
 107              		@ sp needed
 108 0072 80BD     		pop	{r7, pc}
 109              	.L3:
 110              		.align	2
 111              	.L2:
 112 0074 00040240 		.word	1073873920
 113 0078 00100140 		.word	1073811456
 114              		.cfi_endproc
 115              	.LFE123:
 117              		.section	.text._sys_exit,"ax",%progbits
 118              		.align	1
 119              		.global	_sys_exit
 120              		.syntax unified
 121              		.thumb
 122              		.thumb_func
 124              	_sys_exit:
 125              	.LFB124:
  36:./Hardware/Src/Serial.c **** 
  37:./Hardware/Src/Serial.c **** 
  38:./Hardware/Src/Serial.c **** #if 1
  39:./Hardware/Src/Serial.c **** #pragma import(__use_no_semihosting)             
  40:./Hardware/Src/Serial.c **** //æ ‡å‡†åº“éœ€è¦çš„æ”¯æŒå‡½æ•°                 
  41:./Hardware/Src/Serial.c **** struct __FILE 
  42:./Hardware/Src/Serial.c **** { 
  43:./Hardware/Src/Serial.c **** 	int handle; 
  44:./Hardware/Src/Serial.c **** 
  45:./Hardware/Src/Serial.c **** }; 
  46:./Hardware/Src/Serial.c **** 
  47:./Hardware/Src/Serial.c **** void _sys_exit(int x) 
  48:./Hardware/Src/Serial.c **** { 
 126              		.loc 1 48 1
ARM GAS  /tmp/cctTD7N5.s 			page 4


 127              		.cfi_startproc
 128              		@ args = 0, pretend = 0, frame = 8
 129              		@ frame_needed = 1, uses_anonymous_args = 0
 130              		@ link register save eliminated.
 131 0000 80B4     		push	{r7}
 132              		.cfi_def_cfa_offset 4
 133              		.cfi_offset 7, -4
 134 0002 83B0     		sub	sp, sp, #12
 135              		.cfi_def_cfa_offset 16
 136 0004 00AF     		add	r7, sp, #0
 137              		.cfi_def_cfa_register 7
 138 0006 7860     		str	r0, [r7, #4]
  49:./Hardware/Src/Serial.c **** 	x = x; 
  50:./Hardware/Src/Serial.c **** } 
 139              		.loc 1 50 1
 140 0008 00BF     		nop
 141 000a 0C37     		adds	r7, r7, #12
 142              		.cfi_def_cfa_offset 4
 143 000c BD46     		mov	sp, r7
 144              		.cfi_def_cfa_register 13
 145              		@ sp needed
 146 000e 5DF8047B 		ldr	r7, [sp], #4
 147              		.cfi_restore 7
 148              		.cfi_def_cfa_offset 0
 149 0012 7047     		bx	lr
 150              		.cfi_endproc
 151              	.LFE124:
 153              		.section	.text.putc,"ax",%progbits
 154              		.align	1
 155              		.global	putc
 156              		.syntax unified
 157              		.thumb
 158              		.thumb_func
 160              	putc:
 161              	.LFB125:
  51:./Hardware/Src/Serial.c **** //é‡å®šä¹‰fputcå‡½æ•° 
  52:./Hardware/Src/Serial.c **** int putc(int ch)
  53:./Hardware/Src/Serial.c **** {      
 162              		.loc 1 53 1
 163              		.cfi_startproc
 164              		@ args = 0, pretend = 0, frame = 8
 165              		@ frame_needed = 1, uses_anonymous_args = 0
 166              		@ link register save eliminated.
 167 0000 80B4     		push	{r7}
 168              		.cfi_def_cfa_offset 4
 169              		.cfi_offset 7, -4
 170 0002 83B0     		sub	sp, sp, #12
 171              		.cfi_def_cfa_offset 16
 172 0004 00AF     		add	r7, sp, #0
 173              		.cfi_def_cfa_register 7
 174 0006 7860     		str	r0, [r7, #4]
  54:./Hardware/Src/Serial.c **** 	while((USART1->SR&0X40)==0);//å¾ªçŽ¯å‘é€,ç›´åˆ°å‘é€å®Œæ¯•   
 175              		.loc 1 54 7
 176 0008 00BF     		nop
 177              	.L6:
 178              		.loc 1 54 15 discriminator 1
 179 000a 094B     		ldr	r3, .L8
ARM GAS  /tmp/cctTD7N5.s 			page 5


 180 000c 1B88     		ldrh	r3, [r3]	@ movhi
 181 000e 9BB2     		uxth	r3, r3
 182              		.loc 1 54 19 discriminator 1
 183 0010 03F04003 		and	r3, r3, #64
 184              		.loc 1 54 25 discriminator 1
 185 0014 002B     		cmp	r3, #0
 186 0016 F8D0     		beq	.L6
  55:./Hardware/Src/Serial.c ****     USART1->DR = (u8) ch;      
 187              		.loc 1 55 18
 188 0018 7B68     		ldr	r3, [r7, #4]
 189 001a DAB2     		uxtb	r2, r3
 190              		.loc 1 55 11
 191 001c 044B     		ldr	r3, .L8
 192              		.loc 1 55 16
 193 001e 9A80     		strh	r2, [r3, #4]	@ movhi
  56:./Hardware/Src/Serial.c **** 	return ch;
 194              		.loc 1 56 9
 195 0020 7B68     		ldr	r3, [r7, #4]
  57:./Hardware/Src/Serial.c **** }
 196              		.loc 1 57 1
 197 0022 1846     		mov	r0, r3
 198 0024 0C37     		adds	r7, r7, #12
 199              		.cfi_def_cfa_offset 4
 200 0026 BD46     		mov	sp, r7
 201              		.cfi_def_cfa_register 13
 202              		@ sp needed
 203 0028 5DF8047B 		ldr	r7, [sp], #4
 204              		.cfi_restore 7
 205              		.cfi_def_cfa_offset 0
 206 002c 7047     		bx	lr
 207              	.L9:
 208 002e 00BF     		.align	2
 209              	.L8:
 210 0030 00100140 		.word	1073811456
 211              		.cfi_endproc
 212              	.LFE125:
 214              		.section	.text.USARTSendStr,"ax",%progbits
 215              		.align	1
 216              		.global	USARTSendStr
 217              		.syntax unified
 218              		.thumb
 219              		.thumb_func
 221              	USARTSendStr:
 222              	.LFB126:
  58:./Hardware/Src/Serial.c **** #endif 
  59:./Hardware/Src/Serial.c **** 
  60:./Hardware/Src/Serial.c **** void USARTSendStr(USART_TypeDef* USARTx, char* str)
  61:./Hardware/Src/Serial.c **** {
 223              		.loc 1 61 1
 224              		.cfi_startproc
 225              		@ args = 0, pretend = 0, frame = 16
 226              		@ frame_needed = 1, uses_anonymous_args = 0
 227 0000 80B5     		push	{r7, lr}
 228              		.cfi_def_cfa_offset 8
 229              		.cfi_offset 7, -8
 230              		.cfi_offset 14, -4
 231 0002 84B0     		sub	sp, sp, #16
ARM GAS  /tmp/cctTD7N5.s 			page 6


 232              		.cfi_def_cfa_offset 24
 233 0004 00AF     		add	r7, sp, #0
 234              		.cfi_def_cfa_register 7
 235 0006 7860     		str	r0, [r7, #4]
 236 0008 3960     		str	r1, [r7]
  62:./Hardware/Src/Serial.c **** 	uint16_t i=0;
 237              		.loc 1 62 11
 238 000a 0023     		movs	r3, #0
 239 000c FB81     		strh	r3, [r7, #14]	@ movhi
  63:./Hardware/Src/Serial.c **** 	
  64:./Hardware/Src/Serial.c **** 	while( *(str+i) != '\0' )
 240              		.loc 1 64 7
 241 000e 12E0     		b	.L11
 242              	.L13:
  65:./Hardware/Src/Serial.c **** 	{
  66:./Hardware/Src/Serial.c **** 		/*
  67:./Hardware/Src/Serial.c **** 		USART_SendData( USARTx, *(str+i));
  68:./Hardware/Src/Serial.c **** 		while( USART_GetFlagStatus(USARTx, USART_FLAG_TXE) == RESET );
  69:./Hardware/Src/Serial.c **** 		*/
  70:./Hardware/Src/Serial.c **** 			
  71:./Hardware/Src/Serial.c **** 		USART_SendData(USARTx, *(str+i) );
 243              		.loc 1 71 31
 244 0010 FB89     		ldrh	r3, [r7, #14]
 245 0012 3A68     		ldr	r2, [r7]
 246 0014 1344     		add	r3, r3, r2
 247              		.loc 1 71 26
 248 0016 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 249              		.loc 1 71 3
 250 0018 1946     		mov	r1, r3
 251 001a 7868     		ldr	r0, [r7, #4]
 252 001c FFF7FEFF 		bl	USART_SendData
  72:./Hardware/Src/Serial.c **** 		while(USART_GetFlagStatus(USART1,USART_FLAG_TXE)==RESET);  //ä¸éœ€è¦æ‰‹åŠ¨æ¸…é›¶ å†æ¬¡å†™å…¥TD
 253              		.loc 1 72 8
 254 0020 00BF     		nop
 255              	.L12:
 256              		.loc 1 72 9 discriminator 1
 257 0022 8021     		movs	r1, #128
 258 0024 0D48     		ldr	r0, .L15
 259 0026 FFF7FEFF 		bl	USART_GetFlagStatus
 260 002a 0346     		mov	r3, r0
 261              		.loc 1 72 51 discriminator 1
 262 002c 002B     		cmp	r3, #0
 263 002e F8D0     		beq	.L12
  73:./Hardware/Src/Serial.c **** 		i++;
 264              		.loc 1 73 4
 265 0030 FB89     		ldrh	r3, [r7, #14]
 266 0032 0133     		adds	r3, r3, #1
 267 0034 FB81     		strh	r3, [r7, #14]	@ movhi
 268              	.L11:
  64:./Hardware/Src/Serial.c **** 	{
 269              		.loc 1 64 14
 270 0036 FB89     		ldrh	r3, [r7, #14]
 271 0038 3A68     		ldr	r2, [r7]
 272 003a 1344     		add	r3, r3, r2
  64:./Hardware/Src/Serial.c **** 	{
 273              		.loc 1 64 9
 274 003c 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
ARM GAS  /tmp/cctTD7N5.s 			page 7


  64:./Hardware/Src/Serial.c **** 	{
 275              		.loc 1 64 18
 276 003e 002B     		cmp	r3, #0
 277 0040 E6D1     		bne	.L13
  74:./Hardware/Src/Serial.c **** 	}
  75:./Hardware/Src/Serial.c **** 	
  76:./Hardware/Src/Serial.c **** 	while( USART_GetFlagStatus(USARTx, USART_FLAG_TC) == RESET ); //åˆ¤æ–­ str æ˜¯å¦å·²è¢«ï¼ˆå…¨éƒ¨ï¼
 278              		.loc 1 76 7
 279 0042 00BF     		nop
 280              	.L14:
 281              		.loc 1 76 9 discriminator 1
 282 0044 4021     		movs	r1, #64
 283 0046 7868     		ldr	r0, [r7, #4]
 284 0048 FFF7FEFF 		bl	USART_GetFlagStatus
 285 004c 0346     		mov	r3, r0
 286              		.loc 1 76 52 discriminator 1
 287 004e 002B     		cmp	r3, #0
 288 0050 F8D0     		beq	.L14
  77:./Hardware/Src/Serial.c **** }
 289              		.loc 1 77 1
 290 0052 00BF     		nop
 291 0054 00BF     		nop
 292 0056 1037     		adds	r7, r7, #16
 293              		.cfi_def_cfa_offset 8
 294 0058 BD46     		mov	sp, r7
 295              		.cfi_def_cfa_register 13
 296              		@ sp needed
 297 005a 80BD     		pop	{r7, pc}
 298              	.L16:
 299              		.align	2
 300              	.L15:
 301 005c 00100140 		.word	1073811456
 302              		.cfi_endproc
 303              	.LFE126:
 305              		.global	Frame
 306              		.section	.bss.Frame,"aw",%nobits
 307              		.align	2
 310              	Frame:
 311 0000 00000000 		.space	13
 311      00000000 
 311      00000000 
 311      00
 312              		.section	.text.PoseData_Init,"ax",%progbits
 313              		.align	1
 314              		.global	PoseData_Init
 315              		.syntax unified
 316              		.thumb
 317              		.thumb_func
 319              	PoseData_Init:
 320              	.LFB127:
  78:./Hardware/Src/Serial.c **** 
  79:./Hardware/Src/Serial.c **** // DATA_Frame MPU_Data = {0xAA,0xFF,0x04,0x09,0,0,0,0,0x01,0,0,};
  80:./Hardware/Src/Serial.c **** // void Send_Pose(void){
  81:./Hardware/Src/Serial.c **** // 	MPU_Data.DATA[0] = QNum.q0*10000;
  82:./Hardware/Src/Serial.c **** // 	MPU_Data.DATA[1] = QNum.q1*10000;
  83:./Hardware/Src/Serial.c **** // 	MPU_Data.DATA[2] = QNum.q2*10000;
  84:./Hardware/Src/Serial.c **** // 	MPU_Data.DATA[3] = QNum.q3*10000;
ARM GAS  /tmp/cctTD7N5.s 			page 8


  85:./Hardware/Src/Serial.c **** //     uint8_t sum,add = 0;
  86:./Hardware/Src/Serial.c **** // 	sum = 0xAA+0xFF+0x04+0x09+0x01;
  87:./Hardware/Src/Serial.c **** // 	for(i=0;)
  88:./Hardware/Src/Serial.c **** 
  89:./Hardware/Src/Serial.c **** // }
  90:./Hardware/Src/Serial.c **** uint8_t Frame[13] = {0};             //å‘é€çš„æ•°æ®å¸§
  91:./Hardware/Src/Serial.c **** void PoseData_Init(void){
 321              		.loc 1 91 25
 322              		.cfi_startproc
 323              		@ args = 0, pretend = 0, frame = 0
 324              		@ frame_needed = 1, uses_anonymous_args = 0
 325              		@ link register save eliminated.
 326 0000 80B4     		push	{r7}
 327              		.cfi_def_cfa_offset 4
 328              		.cfi_offset 7, -4
 329 0002 00AF     		add	r7, sp, #0
 330              		.cfi_def_cfa_register 7
  92:./Hardware/Src/Serial.c **** 	Frame[0] = 0xAA;                 //å¸§å¤´
 331              		.loc 1 92 11
 332 0004 094B     		ldr	r3, .L18
 333 0006 AA22     		movs	r2, #170
 334 0008 1A70     		strb	r2, [r3]
  93:./Hardware/Src/Serial.c **** 	Frame[1] = 0xFF;                 //ç›®æ ‡åœ°å€
 335              		.loc 1 93 11
 336 000a 084B     		ldr	r3, .L18
 337 000c FF22     		movs	r2, #255
 338 000e 5A70     		strb	r2, [r3, #1]
  94:./Hardware/Src/Serial.c **** 	Frame[2] = 0x03;                 // åŠŸèƒ½ç  0x03è¡¨ç¤ºå‘é€æ¬§æ‹‰è§’
 339              		.loc 1 94 11
 340 0010 064B     		ldr	r3, .L18
 341 0012 0322     		movs	r2, #3
 342 0014 9A70     		strb	r2, [r3, #2]
  95:./Hardware/Src/Serial.c **** 	Frame[3] = 0x07;                 //æ•°æ®é•¿åº¦
 343              		.loc 1 95 11
 344 0016 054B     		ldr	r3, .L18
 345 0018 0722     		movs	r2, #7
 346 001a DA70     		strb	r2, [r3, #3]
  96:./Hardware/Src/Serial.c **** 	Frame[10] = 0x01;                // èžåˆçŠ¶æ€ ï¼ˆæˆ‘ä¹Ÿä¸çŸ¥é“æ˜¯ä»€ä¹ˆï¼Œéšä¾¿ç»™çš„1è¯•äº†
 347              		.loc 1 96 12
 348 001c 034B     		ldr	r3, .L18
 349 001e 0122     		movs	r2, #1
 350 0020 9A72     		strb	r2, [r3, #10]
  97:./Hardware/Src/Serial.c **** }
 351              		.loc 1 97 1
 352 0022 00BF     		nop
 353 0024 BD46     		mov	sp, r7
 354              		.cfi_def_cfa_register 13
 355              		@ sp needed
 356 0026 5DF8047B 		ldr	r7, [sp], #4
 357              		.cfi_restore 7
 358              		.cfi_def_cfa_offset 0
 359 002a 7047     		bx	lr
 360              	.L19:
 361              		.align	2
 362              	.L18:
 363 002c 00000000 		.word	Frame
 364              		.cfi_endproc
ARM GAS  /tmp/cctTD7N5.s 			page 9


 365              	.LFE127:
 367              		.global	__aeabi_f2d
 368              		.global	__aeabi_dmul
 369              		.global	__aeabi_d2iz
 370              		.section	.text.Send_Elua,"ax",%progbits
 371              		.align	1
 372              		.global	Send_Elua
 373              		.syntax unified
 374              		.thumb
 375              		.thumb_func
 377              	Send_Elua:
 378              	.LFB128:
  98:./Hardware/Src/Serial.c **** // void Send_Qnum(void){
  99:./Hardware/Src/Serial.c **** // 	uint16_t Q0 = QNum.q0*10000;
 100:./Hardware/Src/Serial.c **** // 	uint16_t Q1 = QNum.q1*10000;
 101:./Hardware/Src/Serial.c **** // 	uint16_t Q2 = QNum.q2*10000;
 102:./Hardware/Src/Serial.c **** // 	uint16_t Q3 = QNum.q3*10000;
 103:./Hardware/Src/Serial.c **** // 	Frame[4] =  Q0 & 0xFF;
 104:./Hardware/Src/Serial.c **** // 	Frame[5] =  (Q0 >> 8) & 0xFF;
 105:./Hardware/Src/Serial.c **** // 	Frame[6] =  Q1 & 0xFF;
 106:./Hardware/Src/Serial.c **** // 	Frame[7] =  (Q1 >> 8) & 0xFF;	
 107:./Hardware/Src/Serial.c **** // 	Frame[8] =  Q2 & 0xFF;
 108:./Hardware/Src/Serial.c **** // 	Frame[9] =  (Q2 >> 8) & 0xFF;		
 109:./Hardware/Src/Serial.c **** // 	Frame[10] =  Q3 & 0xFF;
 110:./Hardware/Src/Serial.c **** // 	Frame[11] =  (Q3 >> 8) & 0xFF;	
 111:./Hardware/Src/Serial.c **** // 	Frame[13] = 0;
 112:./Hardware/Src/Serial.c **** // 	Frame[14] = 0;
 113:./Hardware/Src/Serial.c **** 	// for(int i=0;i<=12;i++){
 114:./Hardware/Src/Serial.c **** 	// 	Frame[13] += Frame[i];
 115:./Hardware/Src/Serial.c **** 	// 	Frame[14] += Frame[13];
 116:./Hardware/Src/Serial.c **** 	// }
 117:./Hardware/Src/Serial.c **** // 	MY_UART_Send(Frame,15);
 118:./Hardware/Src/Serial.c **** // }
 119:./Hardware/Src/Serial.c **** 
 120:./Hardware/Src/Serial.c **** void Send_Elua(void){
 379              		.loc 1 120 21
 380              		.cfi_startproc
 381              		@ args = 0, pretend = 0, frame = 16
 382              		@ frame_needed = 1, uses_anonymous_args = 0
 383 0000 80B5     		push	{r7, lr}
 384              		.cfi_def_cfa_offset 8
 385              		.cfi_offset 7, -8
 386              		.cfi_offset 14, -4
 387 0002 84B0     		sub	sp, sp, #16
 388              		.cfi_def_cfa_offset 24
 389 0004 00AF     		add	r7, sp, #0
 390              		.cfi_def_cfa_register 7
 121:./Hardware/Src/Serial.c **** 	int16_t roll = angle.roll * 100 *57.3;       //ä¸‰ä¸ªè§’ è¦ä¹˜ä»¥100 æ³¨æ„æ˜¯æœ‰ç¬¦å·æ•°
 391              		.loc 1 121 22
 392 0006 4C4B     		ldr	r3, .L23+8
 393 0008 D3ED017A 		vldr.32	s15, [r3, #4]
 394              		.loc 1 121 28
 395 000c 9FED4B7A 		vldr.32	s14, .L23+12
 396 0010 67EE877A 		vmul.f32	s15, s15, s14
 397 0014 17EE900A 		vmov	r0, s15
 398 0018 FFF7FEFF 		bl	__aeabi_f2d
 399              		.loc 1 121 34
ARM GAS  /tmp/cctTD7N5.s 			page 10


 400 001c 44A3     		adr	r3, .L23
 401 001e D3E90023 		ldrd	r2, [r3]
 402 0022 FFF7FEFF 		bl	__aeabi_dmul
 403 0026 0246     		mov	r2, r0
 404 0028 0B46     		mov	r3, r1
 405              		.loc 1 121 10
 406 002a 1046     		mov	r0, r2
 407 002c 1946     		mov	r1, r3
 408 002e FFF7FEFF 		bl	__aeabi_d2iz
 409 0032 0346     		mov	r3, r0
 410 0034 7B81     		strh	r3, [r7, #10]	@ movhi
 122:./Hardware/Src/Serial.c **** 	int16_t pitch = angle.pitch * 100*57.3;   
 411              		.loc 1 122 23
 412 0036 404B     		ldr	r3, .L23+8
 413 0038 D3ED007A 		vldr.32	s15, [r3]
 414              		.loc 1 122 30
 415 003c 9FED3F7A 		vldr.32	s14, .L23+12
 416 0040 67EE877A 		vmul.f32	s15, s15, s14
 417 0044 17EE900A 		vmov	r0, s15
 418 0048 FFF7FEFF 		bl	__aeabi_f2d
 419              		.loc 1 122 35
 420 004c 38A3     		adr	r3, .L23
 421 004e D3E90023 		ldrd	r2, [r3]
 422 0052 FFF7FEFF 		bl	__aeabi_dmul
 423 0056 0246     		mov	r2, r0
 424 0058 0B46     		mov	r3, r1
 425              		.loc 1 122 10
 426 005a 1046     		mov	r0, r2
 427 005c 1946     		mov	r1, r3
 428 005e FFF7FEFF 		bl	__aeabi_d2iz
 429 0062 0346     		mov	r3, r0
 430 0064 3B81     		strh	r3, [r7, #8]	@ movhi
 123:./Hardware/Src/Serial.c **** 	int16_t yaw = angle.yaw * 100*57.3;
 431              		.loc 1 123 21
 432 0066 344B     		ldr	r3, .L23+8
 433 0068 D3ED027A 		vldr.32	s15, [r3, #8]
 434              		.loc 1 123 26
 435 006c 9FED337A 		vldr.32	s14, .L23+12
 436 0070 67EE877A 		vmul.f32	s15, s15, s14
 437 0074 17EE900A 		vmov	r0, s15
 438 0078 FFF7FEFF 		bl	__aeabi_f2d
 439              		.loc 1 123 31
 440 007c 2CA3     		adr	r3, .L23
 441 007e D3E90023 		ldrd	r2, [r3]
 442 0082 FFF7FEFF 		bl	__aeabi_dmul
 443 0086 0246     		mov	r2, r0
 444 0088 0B46     		mov	r3, r1
 445              		.loc 1 123 10
 446 008a 1046     		mov	r0, r2
 447 008c 1946     		mov	r1, r3
 448 008e FFF7FEFF 		bl	__aeabi_d2iz
 449 0092 0346     		mov	r3, r0
 450 0094 FB80     		strh	r3, [r7, #6]	@ movhi
 124:./Hardware/Src/Serial.c **** 	Frame[4] = roll & 0xFF;                     //ç”¨ä¸¤ä¸ªå­—èŠ‚å‚¨å­˜ ä½Žå­—èŠ‚åœ¨å‰ é«˜å­—èŠ‚åœ¨å
 451              		.loc 1 124 11
 452 0096 7B89     		ldrh	r3, [r7, #10]	@ movhi
 453 0098 DAB2     		uxtb	r2, r3
ARM GAS  /tmp/cctTD7N5.s 			page 11


 454 009a 294B     		ldr	r3, .L23+16
 455 009c 1A71     		strb	r2, [r3, #4]
 125:./Hardware/Src/Serial.c **** 	Frame[5] = (roll>>8) & 0xFF;
 456              		.loc 1 125 11
 457 009e B7F90A30 		ldrsh	r3, [r7, #10]
 458 00a2 1B12     		asrs	r3, r3, #8
 459 00a4 1BB2     		sxth	r3, r3
 460 00a6 DAB2     		uxtb	r2, r3
 461 00a8 254B     		ldr	r3, .L23+16
 462 00aa 5A71     		strb	r2, [r3, #5]
 126:./Hardware/Src/Serial.c **** 	Frame[6] = pitch & 0xFF;
 463              		.loc 1 126 11
 464 00ac 3B89     		ldrh	r3, [r7, #8]	@ movhi
 465 00ae DAB2     		uxtb	r2, r3
 466 00b0 234B     		ldr	r3, .L23+16
 467 00b2 9A71     		strb	r2, [r3, #6]
 127:./Hardware/Src/Serial.c **** 	Frame[7] = (pitch>>8) & 0xFF;	
 468              		.loc 1 127 11
 469 00b4 B7F90830 		ldrsh	r3, [r7, #8]
 470 00b8 1B12     		asrs	r3, r3, #8
 471 00ba 1BB2     		sxth	r3, r3
 472 00bc DAB2     		uxtb	r2, r3
 473 00be 204B     		ldr	r3, .L23+16
 474 00c0 DA71     		strb	r2, [r3, #7]
 128:./Hardware/Src/Serial.c **** 	Frame[8] = yaw & 0xFF;
 475              		.loc 1 128 11
 476 00c2 FB88     		ldrh	r3, [r7, #6]	@ movhi
 477 00c4 DAB2     		uxtb	r2, r3
 478 00c6 1E4B     		ldr	r3, .L23+16
 479 00c8 1A72     		strb	r2, [r3, #8]
 129:./Hardware/Src/Serial.c **** 	Frame[9] = (yaw>>8) & 0xFF;
 480              		.loc 1 129 11
 481 00ca B7F90630 		ldrsh	r3, [r7, #6]
 482 00ce 1B12     		asrs	r3, r3, #8
 483 00d0 1BB2     		sxth	r3, r3
 484 00d2 DAB2     		uxtb	r2, r3
 485 00d4 1A4B     		ldr	r3, .L23+16
 486 00d6 5A72     		strb	r2, [r3, #9]
 130:./Hardware/Src/Serial.c **** 	Frame[11] = 0;                               //å’Œæ ¡éªŒ
 487              		.loc 1 130 12
 488 00d8 194B     		ldr	r3, .L23+16
 489 00da 0022     		movs	r2, #0
 490 00dc DA72     		strb	r2, [r3, #11]
 131:./Hardware/Src/Serial.c **** 	Frame[12] = 0;		                         //é™„åŠ æ ¡éªŒ
 491              		.loc 1 131 12
 492 00de 184B     		ldr	r3, .L23+16
 493 00e0 0022     		movs	r2, #0
 494 00e2 1A73     		strb	r2, [r3, #12]
 495              	.LBB2:
 132:./Hardware/Src/Serial.c **** 	for(int i=0;i<=10;i++){
 496              		.loc 1 132 10
 497 00e4 0023     		movs	r3, #0
 498 00e6 FB60     		str	r3, [r7, #12]
 499              		.loc 1 132 2
 500 00e8 14E0     		b	.L21
 501              	.L22:
 133:./Hardware/Src/Serial.c **** 		Frame[11] += Frame[i];
ARM GAS  /tmp/cctTD7N5.s 			page 12


 502              		.loc 1 133 8 discriminator 3
 503 00ea 154B     		ldr	r3, .L23+16
 504 00ec DA7A     		ldrb	r2, [r3, #11]	@ zero_extendqisi2
 505              		.loc 1 133 21 discriminator 3
 506 00ee 1449     		ldr	r1, .L23+16
 507 00f0 FB68     		ldr	r3, [r7, #12]
 508 00f2 0B44     		add	r3, r3, r1
 509 00f4 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 510              		.loc 1 133 13 discriminator 3
 511 00f6 1344     		add	r3, r3, r2
 512 00f8 DAB2     		uxtb	r2, r3
 513 00fa 114B     		ldr	r3, .L23+16
 514 00fc DA72     		strb	r2, [r3, #11]
 134:./Hardware/Src/Serial.c **** 		Frame[12] += Frame[11];
 515              		.loc 1 134 8 discriminator 3
 516 00fe 104B     		ldr	r3, .L23+16
 517 0100 1A7B     		ldrb	r2, [r3, #12]	@ zero_extendqisi2
 518              		.loc 1 134 21 discriminator 3
 519 0102 0F4B     		ldr	r3, .L23+16
 520 0104 DB7A     		ldrb	r3, [r3, #11]	@ zero_extendqisi2
 521              		.loc 1 134 13 discriminator 3
 522 0106 1344     		add	r3, r3, r2
 523 0108 DAB2     		uxtb	r2, r3
 524 010a 0D4B     		ldr	r3, .L23+16
 525 010c 1A73     		strb	r2, [r3, #12]
 132:./Hardware/Src/Serial.c **** 	for(int i=0;i<=10;i++){
 526              		.loc 1 132 21 discriminator 3
 527 010e FB68     		ldr	r3, [r7, #12]
 528 0110 0133     		adds	r3, r3, #1
 529 0112 FB60     		str	r3, [r7, #12]
 530              	.L21:
 132:./Hardware/Src/Serial.c **** 	for(int i=0;i<=10;i++){
 531              		.loc 1 132 15 discriminator 1
 532 0114 FB68     		ldr	r3, [r7, #12]
 533 0116 0A2B     		cmp	r3, #10
 534 0118 E7DD     		ble	.L22
 535              	.LBE2:
 135:./Hardware/Src/Serial.c **** 	}
 136:./Hardware/Src/Serial.c **** 	MY_UART_Send(Frame,13);
 536              		.loc 1 136 2
 537 011a 0D21     		movs	r1, #13
 538 011c 0848     		ldr	r0, .L23+16
 539 011e FFF7FEFF 		bl	MY_UART_Send
 137:./Hardware/Src/Serial.c **** }
 540              		.loc 1 137 1
 541 0122 00BF     		nop
 542 0124 1037     		adds	r7, r7, #16
 543              		.cfi_def_cfa_offset 8
 544 0126 BD46     		mov	sp, r7
 545              		.cfi_def_cfa_register 13
 546              		@ sp needed
 547 0128 80BD     		pop	{r7, pc}
 548              	.L24:
 549 012a 00BFAFF3 		.align	3
 549      0080
 550              	.L23:
 551 0130 66666666 		.word	1717986918
ARM GAS  /tmp/cctTD7N5.s 			page 13


 552 0134 66A64C40 		.word	1078765158
 553 0138 00000000 		.word	angle
 554 013c 0000C842 		.word	1120403456
 555 0140 00000000 		.word	Frame
 556              		.cfi_endproc
 557              	.LFE128:
 559              		.section	.text.MY_UART_Send,"ax",%progbits
 560              		.align	1
 561              		.global	MY_UART_Send
 562              		.syntax unified
 563              		.thumb
 564              		.thumb_func
 566              	MY_UART_Send:
 567              	.LFB129:
 138:./Hardware/Src/Serial.c **** void MY_UART_Send(uint8_t *string, uint8_t size){
 568              		.loc 1 138 49
 569              		.cfi_startproc
 570              		@ args = 0, pretend = 0, frame = 8
 571              		@ frame_needed = 1, uses_anonymous_args = 0
 572              		@ link register save eliminated.
 573 0000 80B4     		push	{r7}
 574              		.cfi_def_cfa_offset 4
 575              		.cfi_offset 7, -4
 576 0002 83B0     		sub	sp, sp, #12
 577              		.cfi_def_cfa_offset 16
 578 0004 00AF     		add	r7, sp, #0
 579              		.cfi_def_cfa_register 7
 580 0006 7860     		str	r0, [r7, #4]
 581 0008 0B46     		mov	r3, r1
 582 000a FB70     		strb	r3, [r7, #3]
 139:./Hardware/Src/Serial.c ****     while(size){
 583              		.loc 1 139 10
 584 000c 11E0     		b	.L26
 585              	.L28:
 140:./Hardware/Src/Serial.c ****         while(!(USART1->SR & USART_SR_TXE));
 586              		.loc 1 140 14
 587 000e 00BF     		nop
 588              	.L27:
 589              		.loc 1 140 23 discriminator 1
 590 0010 0D4B     		ldr	r3, .L29
 591 0012 1B88     		ldrh	r3, [r3]	@ movhi
 592 0014 9BB2     		uxth	r3, r3
 593              		.loc 1 140 28 discriminator 1
 594 0016 03F08003 		and	r3, r3, #128
 595              		.loc 1 140 15 discriminator 1
 596 001a 002B     		cmp	r3, #0
 597 001c F8D0     		beq	.L27
 141:./Hardware/Src/Serial.c ****         USART1->DR = *string;
 598              		.loc 1 141 22
 599 001e 7B68     		ldr	r3, [r7, #4]
 600 0020 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 601              		.loc 1 141 15
 602 0022 094B     		ldr	r3, .L29
 603              		.loc 1 141 20
 604 0024 9A80     		strh	r2, [r3, #4]	@ movhi
 142:./Hardware/Src/Serial.c ****         string++;
 605              		.loc 1 142 15
ARM GAS  /tmp/cctTD7N5.s 			page 14


 606 0026 7B68     		ldr	r3, [r7, #4]
 607 0028 0133     		adds	r3, r3, #1
 608 002a 7B60     		str	r3, [r7, #4]
 143:./Hardware/Src/Serial.c ****         size--;
 609              		.loc 1 143 13
 610 002c FB78     		ldrb	r3, [r7, #3]	@ zero_extendqisi2
 611 002e 013B     		subs	r3, r3, #1
 612 0030 FB70     		strb	r3, [r7, #3]
 613              	.L26:
 139:./Hardware/Src/Serial.c ****         while(!(USART1->SR & USART_SR_TXE));
 614              		.loc 1 139 11
 615 0032 FB78     		ldrb	r3, [r7, #3]	@ zero_extendqisi2
 616 0034 002B     		cmp	r3, #0
 617 0036 EAD1     		bne	.L28
 144:./Hardware/Src/Serial.c ****     }
 145:./Hardware/Src/Serial.c **** }
 618              		.loc 1 145 1
 619 0038 00BF     		nop
 620 003a 00BF     		nop
 621 003c 0C37     		adds	r7, r7, #12
 622              		.cfi_def_cfa_offset 4
 623 003e BD46     		mov	sp, r7
 624              		.cfi_def_cfa_register 13
 625              		@ sp needed
 626 0040 5DF8047B 		ldr	r7, [sp], #4
 627              		.cfi_restore 7
 628              		.cfi_def_cfa_offset 0
 629 0044 7047     		bx	lr
 630              	.L30:
 631 0046 00BF     		.align	2
 632              	.L29:
 633 0048 00100140 		.word	1073811456
 634              		.cfi_endproc
 635              	.LFE129:
 637              		.text
 638              	.Letext0:
 639              		.file 2 "./Hardware/Inc/IMU.h"
 640              		.file 3 "/usr/lib/gcc/arm-none-eabi/12.2.1/include/stdint.h"
 641              		.file 4 "./Start/stm32f4xx.h"
 642              		.file 5 "./Lib/inc/stm32f4xx_gpio.h"
 643              		.file 6 "./Lib/inc/stm32f4xx_usart.h"
 644              		.file 7 "./Lib/inc/stm32f4xx_rcc.h"
ARM GAS  /tmp/cctTD7N5.s 			page 15


DEFINED SYMBOLS
                            *ABS*:0000000000000000 Serial.c
     /tmp/cctTD7N5.s:21     .text.uart_init:0000000000000000 $t
     /tmp/cctTD7N5.s:27     .text.uart_init:0000000000000000 uart_init
     /tmp/cctTD7N5.s:112    .text.uart_init:0000000000000074 $d
     /tmp/cctTD7N5.s:118    .text._sys_exit:0000000000000000 $t
     /tmp/cctTD7N5.s:124    .text._sys_exit:0000000000000000 _sys_exit
     /tmp/cctTD7N5.s:154    .text.putc:0000000000000000 $t
     /tmp/cctTD7N5.s:160    .text.putc:0000000000000000 putc
     /tmp/cctTD7N5.s:210    .text.putc:0000000000000030 $d
     /tmp/cctTD7N5.s:215    .text.USARTSendStr:0000000000000000 $t
     /tmp/cctTD7N5.s:221    .text.USARTSendStr:0000000000000000 USARTSendStr
     /tmp/cctTD7N5.s:301    .text.USARTSendStr:000000000000005c $d
     /tmp/cctTD7N5.s:310    .bss.Frame:0000000000000000 Frame
     /tmp/cctTD7N5.s:307    .bss.Frame:0000000000000000 $d
     /tmp/cctTD7N5.s:313    .text.PoseData_Init:0000000000000000 $t
     /tmp/cctTD7N5.s:319    .text.PoseData_Init:0000000000000000 PoseData_Init
     /tmp/cctTD7N5.s:363    .text.PoseData_Init:000000000000002c $d
     /tmp/cctTD7N5.s:371    .text.Send_Elua:0000000000000000 $t
     /tmp/cctTD7N5.s:377    .text.Send_Elua:0000000000000000 Send_Elua
     /tmp/cctTD7N5.s:566    .text.MY_UART_Send:0000000000000000 MY_UART_Send
     /tmp/cctTD7N5.s:551    .text.Send_Elua:0000000000000130 $d
     /tmp/cctTD7N5.s:560    .text.MY_UART_Send:0000000000000000 $t
     /tmp/cctTD7N5.s:633    .text.MY_UART_Send:0000000000000048 $d

UNDEFINED SYMBOLS
RCC_AHB1PeriphClockCmd
RCC_APB2PeriphClockCmd
GPIO_PinAFConfig
GPIO_Init
USART_Init
USART_Cmd
USART_SendData
USART_GetFlagStatus
__aeabi_f2d
__aeabi_dmul
__aeabi_d2iz
angle
