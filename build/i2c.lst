ARM GAS  /tmp/ccRy4LVN.s 			page 1


   1              		.cpu cortex-m4
   2              		.arch armv7e-m
   3              		.fpu fpv4-sp-d16
   4              		.eabi_attribute 27, 1
   5              		.eabi_attribute 28, 1
   6              		.eabi_attribute 20, 1
   7              		.eabi_attribute 21, 1
   8              		.eabi_attribute 23, 3
   9              		.eabi_attribute 24, 1
  10              		.eabi_attribute 25, 1
  11              		.eabi_attribute 26, 1
  12              		.eabi_attribute 30, 6
  13              		.eabi_attribute 34, 1
  14              		.eabi_attribute 18, 4
  15              		.file	"i2c.c"
  16              		.text
  17              	.Ltext0:
  18              		.cfi_sections	.debug_frame
  19              		.file 1 "./Tools/Src/i2c.c"
  20              		.section	.text.I2C_Configuration,"ax",%progbits
  21              		.align	1
  22              		.global	I2C_Configuration
  23              		.syntax unified
  24              		.thumb
  25              		.thumb_func
  27              	I2C_Configuration:
  28              	.LFB123:
   1:./Tools/Src/i2c.c **** #include "i2c.h"
   2:./Tools/Src/i2c.c **** 
   3:./Tools/Src/i2c.c **** void I2C_Configuration(void){ //I2Cåˆå§‹åŒ–
  29              		.loc 1 3 29
  30              		.cfi_startproc
  31              		@ args = 0, pretend = 0, frame = 24
  32              		@ frame_needed = 1, uses_anonymous_args = 0
  33 0000 80B5     		push	{r7, lr}
  34              		.cfi_def_cfa_offset 8
  35              		.cfi_offset 7, -8
  36              		.cfi_offset 14, -4
  37 0002 86B0     		sub	sp, sp, #24
  38              		.cfi_def_cfa_offset 32
  39 0004 00AF     		add	r7, sp, #0
  40              		.cfi_def_cfa_register 7
   4:./Tools/Src/i2c.c **** 	//I2CæŽ¥å£åˆå§‹åŒ–
   5:./Tools/Src/i2c.c **** 		GPIO_InitTypeDef  GPIO_InitStructure;	
   6:./Tools/Src/i2c.c **** 		I2C_InitTypeDef  I2C_InitStructure;
   7:./Tools/Src/i2c.c **** 		RCC_APB1PeriphClockCmd(RCC_APB1Periph_I2C1,ENABLE);       
  41              		.loc 1 7 3
  42 0006 0121     		movs	r1, #1
  43 0008 4FF40010 		mov	r0, #2097152
  44 000c FFF7FEFF 		bl	RCC_APB1PeriphClockCmd
   8:./Tools/Src/i2c.c **** 		RCC_AHB1PeriphClockCmd(RCC_AHB1Periph_GPIOB, ENABLE); //å¯åŠ¨I2CåŠŸèƒ½ 
  45              		.loc 1 8 3
  46 0010 0121     		movs	r1, #1
  47 0012 0220     		movs	r0, #2
  48 0014 FFF7FEFF 		bl	RCC_AHB1PeriphClockCmd
   9:./Tools/Src/i2c.c **** 		GPIO_InitStructure.GPIO_Pin = I2C_SCL|I2C_SDA; //é€‰æ‹©ç«¯å£å·                      
  49              		.loc 1 9 31
ARM GAS  /tmp/ccRy4LVN.s 			page 2


  50 0018 4FF44073 		mov	r3, #768
  51 001c 3B61     		str	r3, [r7, #16]
  10:./Tools/Src/i2c.c **** 		GPIO_InitStructure.GPIO_Mode = GPIO_Mode_AF; //é€‰æ‹©IOæŽ¥å£å·¥ä½œæ–¹å¼ä¸ºå¤ç”¨è¾“å‡º      
  52              		.loc 1 10 32
  53 001e 0223     		movs	r3, #2
  54 0020 3B75     		strb	r3, [r7, #20]
  11:./Tools/Src/i2c.c **** 		GPIO_InitStructure.GPIO_Speed = GPIO_Speed_100MHz; //è®¾ç½®IOæŽ¥å£é€Ÿåº¦    
  55              		.loc 1 11 33
  56 0022 0323     		movs	r3, #3
  57 0024 7B75     		strb	r3, [r7, #21]
  12:./Tools/Src/i2c.c **** 		GPIO_InitStructure.GPIO_OType = GPIO_OType_OD;//å¼€æ¼è¾“å‡º
  58              		.loc 1 12 33
  59 0026 0123     		movs	r3, #1
  60 0028 BB75     		strb	r3, [r7, #22]
  13:./Tools/Src/i2c.c **** 		GPIO_InitStructure.GPIO_PuPd = GPIO_PuPd_NOPULL;//æ— ä¸Šæ‹‰
  61              		.loc 1 13 32
  62 002a 0023     		movs	r3, #0
  63 002c FB75     		strb	r3, [r7, #23]
  14:./Tools/Src/i2c.c **** 		GPIO_Init(GPIOB, &GPIO_InitStructure);
  64              		.loc 1 14 3
  65 002e 07F11003 		add	r3, r7, #16
  66 0032 1946     		mov	r1, r3
  67 0034 1448     		ldr	r0, .L2
  68 0036 FFF7FEFF 		bl	GPIO_Init
  15:./Tools/Src/i2c.c **** 		GPIO_PinAFConfig(GPIOB,GPIO_PinSource8,GPIO_AF_I2C1);  //è¿™ä¸¤ä¸ªçš„é…ç½®å¿…é¡»æœ‰ï¼Œæ²¡æœ‰åˆ™æ
  69              		.loc 1 15 3
  70 003a 0422     		movs	r2, #4
  71 003c 0821     		movs	r1, #8
  72 003e 1248     		ldr	r0, .L2
  73 0040 FFF7FEFF 		bl	GPIO_PinAFConfig
  16:./Tools/Src/i2c.c **** 		GPIO_PinAFConfig(GPIOB,GPIO_PinSource9,GPIO_AF_I2C1);
  74              		.loc 1 16 3
  75 0044 0422     		movs	r2, #4
  76 0046 0921     		movs	r1, #9
  77 0048 0F48     		ldr	r0, .L2
  78 004a FFF7FEFF 		bl	GPIO_PinAFConfig
  17:./Tools/Src/i2c.c **** 		
  18:./Tools/Src/i2c.c **** 		I2C_InitStructure.I2C_Mode = I2C_Mode_I2C;//è®¾ç½®ä¸ºI2Cæ¨¡å¼
  79              		.loc 1 18 30
  80 004e 0023     		movs	r3, #0
  81 0050 BB80     		strh	r3, [r7, #4]	@ movhi
  19:./Tools/Src/i2c.c **** 		I2C_InitStructure.I2C_DutyCycle = I2C_DutyCycle_2;
  82              		.loc 1 19 35
  83 0052 4BF6FF73 		movw	r3, #49151
  84 0056 FB80     		strh	r3, [r7, #6]	@ movhi
  20:./Tools/Src/i2c.c **** 		I2C_InitStructure.I2C_OwnAddress1 = HostAddress; //ä¸»æœºåœ°å€ï¼ˆä»Žæœºä¸å¾—ç”¨æ­¤åœ°å€ï¼‰
  85              		.loc 1 20 37
  86 0058 0A23     		movs	r3, #10
  87 005a 3B81     		strh	r3, [r7, #8]	@ movhi
  21:./Tools/Src/i2c.c **** 		I2C_InitStructure.I2C_Ack = I2C_Ack_Enable;//å…è®¸åº”ç­”
  88              		.loc 1 21 29
  89 005c 4FF48063 		mov	r3, #1024
  90 0060 7B81     		strh	r3, [r7, #10]	@ movhi
  22:./Tools/Src/i2c.c **** 		I2C_InitStructure.I2C_AcknowledgedAddress = I2C_AcknowledgedAddress_7bit; //7ä½åœ°å€æ¨¡å¼
  91              		.loc 1 22 45
  92 0062 4FF48043 		mov	r3, #16384
  93 0066 BB81     		strh	r3, [r7, #12]	@ movhi
ARM GAS  /tmp/ccRy4LVN.s 			page 3


  23:./Tools/Src/i2c.c **** 		I2C_InitStructure.I2C_ClockSpeed = I2C_Speed; //æ€»çº¿é€Ÿåº¦è®¾ç½® 	
  94              		.loc 1 23 36
  95 0068 084B     		ldr	r3, .L2+4
  96 006a 3B60     		str	r3, [r7]
  24:./Tools/Src/i2c.c **** 		I2C_Init(I2C1,&I2C_InitStructure);
  97              		.loc 1 24 3
  98 006c 3B46     		mov	r3, r7
  99 006e 1946     		mov	r1, r3
 100 0070 0748     		ldr	r0, .L2+8
 101 0072 FFF7FEFF 		bl	I2C_Init
  25:./Tools/Src/i2c.c **** 		I2C_Cmd(I2C1,ENABLE);//å¼€å¯I2C					
 102              		.loc 1 25 3
 103 0076 0121     		movs	r1, #1
 104 0078 0548     		ldr	r0, .L2+8
 105 007a FFF7FEFF 		bl	I2C_Cmd
  26:./Tools/Src/i2c.c **** }
 106              		.loc 1 26 1
 107 007e 00BF     		nop
 108 0080 1837     		adds	r7, r7, #24
 109              		.cfi_def_cfa_offset 8
 110 0082 BD46     		mov	sp, r7
 111              		.cfi_def_cfa_register 13
 112              		@ sp needed
 113 0084 80BD     		pop	{r7, pc}
 114              	.L3:
 115 0086 00BF     		.align	2
 116              	.L2:
 117 0088 00040240 		.word	1073873920
 118 008c A0860100 		.word	100000
 119 0090 00540040 		.word	1073763328
 120              		.cfi_endproc
 121              	.LFE123:
 123              		.section	.text.I2C_SEND_BUFFER,"ax",%progbits
 124              		.align	1
 125              		.global	I2C_SEND_BUFFER
 126              		.syntax unified
 127              		.thumb
 128              		.thumb_func
 130              	I2C_SEND_BUFFER:
 131              	.LFB124:
  27:./Tools/Src/i2c.c **** 
  28:./Tools/Src/i2c.c **** void I2C_SEND_BUFFER(u8 SlaveAddr,u8 WriteAddr,u8* pBuffer,u16 NumByteToWrite){ //I2Cå‘é€æ•°æ®ä¸
 132              		.loc 1 28 79
 133              		.cfi_startproc
 134              		@ args = 0, pretend = 0, frame = 8
 135              		@ frame_needed = 1, uses_anonymous_args = 0
 136 0000 80B5     		push	{r7, lr}
 137              		.cfi_def_cfa_offset 8
 138              		.cfi_offset 7, -8
 139              		.cfi_offset 14, -4
 140 0002 82B0     		sub	sp, sp, #8
 141              		.cfi_def_cfa_offset 16
 142 0004 00AF     		add	r7, sp, #0
 143              		.cfi_def_cfa_register 7
 144 0006 3A60     		str	r2, [r7]
 145 0008 1A46     		mov	r2, r3
 146 000a 0346     		mov	r3, r0
ARM GAS  /tmp/ccRy4LVN.s 			page 4


 147 000c FB71     		strb	r3, [r7, #7]
 148 000e 0B46     		mov	r3, r1
 149 0010 BB71     		strb	r3, [r7, #6]
 150 0012 1346     		mov	r3, r2	@ movhi
 151 0014 BB80     		strh	r3, [r7, #4]	@ movhi
  29:./Tools/Src/i2c.c **** 	I2C_GenerateSTART(I2C1,ENABLE);//äº§ç”Ÿèµ·å§‹ä½
 152              		.loc 1 29 2
 153 0016 0121     		movs	r1, #1
 154 0018 2248     		ldr	r0, .L11
 155 001a FFF7FEFF 		bl	I2C_GenerateSTART
  30:./Tools/Src/i2c.c **** 	while(!I2C_CheckEvent(I2C1,I2C_EVENT_MASTER_MODE_SELECT)); //æ¸…é™¤EV5
 156              		.loc 1 30 7
 157 001e 00BF     		nop
 158              	.L5:
 159              		.loc 1 30 9 discriminator 1
 160 0020 2149     		ldr	r1, .L11+4
 161 0022 2048     		ldr	r0, .L11
 162 0024 FFF7FEFF 		bl	I2C_CheckEvent
 163 0028 0346     		mov	r3, r0
 164              		.loc 1 30 8 discriminator 1
 165 002a 002B     		cmp	r3, #0
 166 002c F8D0     		beq	.L5
  31:./Tools/Src/i2c.c **** 	I2C_Send7bitAddress(I2C1,SlaveAddr,I2C_Direction_Transmitter);//å‘é€å™¨ä»¶åœ°å€
 167              		.loc 1 31 2
 168 002e FB79     		ldrb	r3, [r7, #7]	@ zero_extendqisi2
 169 0030 0022     		movs	r2, #0
 170 0032 1946     		mov	r1, r3
 171 0034 1B48     		ldr	r0, .L11
 172 0036 FFF7FEFF 		bl	I2C_Send7bitAddress
  32:./Tools/Src/i2c.c **** 	while(!I2C_CheckEvent(I2C1,I2C_EVENT_MASTER_TRANSMITTER_MODE_SELECTED));//æ¸…é™¤EV6
 173              		.loc 1 32 7
 174 003a 00BF     		nop
 175              	.L6:
 176              		.loc 1 32 9 discriminator 1
 177 003c 1B49     		ldr	r1, .L11+8
 178 003e 1948     		ldr	r0, .L11
 179 0040 FFF7FEFF 		bl	I2C_CheckEvent
 180 0044 0346     		mov	r3, r0
 181              		.loc 1 32 8 discriminator 1
 182 0046 002B     		cmp	r3, #0
 183 0048 F8D0     		beq	.L6
  33:./Tools/Src/i2c.c **** 	I2C_SendData(I2C1,WriteAddr); //å†…éƒ¨åŠŸèƒ½åœ°å€
 184              		.loc 1 33 2
 185 004a BB79     		ldrb	r3, [r7, #6]	@ zero_extendqisi2
 186 004c 1946     		mov	r1, r3
 187 004e 1548     		ldr	r0, .L11
 188 0050 FFF7FEFF 		bl	I2C_SendData
  34:./Tools/Src/i2c.c **** 	while(!I2C_CheckEvent(I2C1,I2C_EVENT_MASTER_BYTE_TRANSMITTED));//ç§»ä½å¯„å­˜å™¨éžç©ºï¼Œæ•°æ®å¯„
 189              		.loc 1 34 7
 190 0054 00BF     		nop
 191              	.L7:
 192              		.loc 1 34 9 discriminator 1
 193 0056 1649     		ldr	r1, .L11+12
 194 0058 1248     		ldr	r0, .L11
 195 005a FFF7FEFF 		bl	I2C_CheckEvent
 196 005e 0346     		mov	r3, r0
 197              		.loc 1 34 8 discriminator 1
ARM GAS  /tmp/ccRy4LVN.s 			page 5


 198 0060 002B     		cmp	r3, #0
 199 0062 F8D0     		beq	.L7
  35:./Tools/Src/i2c.c **** 	while(NumByteToWrite--){ //å¾ªçŽ¯å‘é€æ•°æ®	
 200              		.loc 1 35 7
 201 0064 10E0     		b	.L8
 202              	.L10:
  36:./Tools/Src/i2c.c **** 		I2C_SendData(I2C1,*pBuffer); //å‘é€æ•°æ®
 203              		.loc 1 36 3
 204 0066 3B68     		ldr	r3, [r7]
 205 0068 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 206 006a 1946     		mov	r1, r3
 207 006c 0D48     		ldr	r0, .L11
 208 006e FFF7FEFF 		bl	I2C_SendData
  37:./Tools/Src/i2c.c **** 		pBuffer++; //æ•°æ®æŒ‡é’ˆç§»ä½
 209              		.loc 1 37 10
 210 0072 3B68     		ldr	r3, [r7]
 211 0074 0133     		adds	r3, r3, #1
 212 0076 3B60     		str	r3, [r7]
  38:./Tools/Src/i2c.c **** 		while (!I2C_CheckEvent(I2C1,I2C_EVENT_MASTER_BYTE_TRANSMITTED));//æ¸…é™¤EV8
 213              		.loc 1 38 9
 214 0078 00BF     		nop
 215              	.L9:
 216              		.loc 1 38 11 discriminator 1
 217 007a 0D49     		ldr	r1, .L11+12
 218 007c 0948     		ldr	r0, .L11
 219 007e FFF7FEFF 		bl	I2C_CheckEvent
 220 0082 0346     		mov	r3, r0
 221              		.loc 1 38 10 discriminator 1
 222 0084 002B     		cmp	r3, #0
 223 0086 F8D0     		beq	.L9
 224              	.L8:
  35:./Tools/Src/i2c.c **** 		I2C_SendData(I2C1,*pBuffer); //å‘é€æ•°æ®
 225              		.loc 1 35 22
 226 0088 BB88     		ldrh	r3, [r7, #4]
 227 008a 5A1E     		subs	r2, r3, #1
 228 008c BA80     		strh	r2, [r7, #4]	@ movhi
  35:./Tools/Src/i2c.c **** 		I2C_SendData(I2C1,*pBuffer); //å‘é€æ•°æ®
 229              		.loc 1 35 8
 230 008e 002B     		cmp	r3, #0
 231 0090 E9D1     		bne	.L10
  39:./Tools/Src/i2c.c **** 	}
  40:./Tools/Src/i2c.c **** 	I2C_GenerateSTOP(I2C1,ENABLE);//äº§ç”Ÿåœæ­¢ä¿¡å·
 232              		.loc 1 40 2
 233 0092 0121     		movs	r1, #1
 234 0094 0348     		ldr	r0, .L11
 235 0096 FFF7FEFF 		bl	I2C_GenerateSTOP
  41:./Tools/Src/i2c.c **** }
 236              		.loc 1 41 1
 237 009a 00BF     		nop
 238 009c 0837     		adds	r7, r7, #8
 239              		.cfi_def_cfa_offset 8
 240 009e BD46     		mov	sp, r7
 241              		.cfi_def_cfa_register 13
 242              		@ sp needed
 243 00a0 80BD     		pop	{r7, pc}
 244              	.L12:
 245 00a2 00BF     		.align	2
ARM GAS  /tmp/ccRy4LVN.s 			page 6


 246              	.L11:
 247 00a4 00540040 		.word	1073763328
 248 00a8 01000300 		.word	196609
 249 00ac 82000700 		.word	458882
 250 00b0 84000700 		.word	458884
 251              		.cfi_endproc
 252              	.LFE124:
 254              		.section	.text.I2C_SEND_BYTE,"ax",%progbits
 255              		.align	1
 256              		.global	I2C_SEND_BYTE
 257              		.syntax unified
 258              		.thumb
 259              		.thumb_func
 261              	I2C_SEND_BYTE:
 262              	.LFB125:
  42:./Tools/Src/i2c.c **** 
  43:./Tools/Src/i2c.c **** void I2C_SEND_BYTE(u8 SlaveAddr,u8 writeAddr,u8 pBuffer){ //I2Cå‘é€ä¸€ä¸ªå­—èŠ‚ï¼ˆä»Žåœ°å€ï¼Œå†…
 263              		.loc 1 43 57
 264              		.cfi_startproc
 265              		@ args = 0, pretend = 0, frame = 8
 266              		@ frame_needed = 1, uses_anonymous_args = 0
 267 0000 80B5     		push	{r7, lr}
 268              		.cfi_def_cfa_offset 8
 269              		.cfi_offset 7, -8
 270              		.cfi_offset 14, -4
 271 0002 82B0     		sub	sp, sp, #8
 272              		.cfi_def_cfa_offset 16
 273 0004 00AF     		add	r7, sp, #0
 274              		.cfi_def_cfa_register 7
 275 0006 0346     		mov	r3, r0
 276 0008 FB71     		strb	r3, [r7, #7]
 277 000a 0B46     		mov	r3, r1
 278 000c BB71     		strb	r3, [r7, #6]
 279 000e 1346     		mov	r3, r2
 280 0010 7B71     		strb	r3, [r7, #5]
  44:./Tools/Src/i2c.c **** 	I2C_GenerateSTART(I2C1,ENABLE); //å‘é€å¼€å§‹ä¿¡å·
 281              		.loc 1 44 2
 282 0012 0121     		movs	r1, #1
 283 0014 1D48     		ldr	r0, .L18
 284 0016 FFF7FEFF 		bl	I2C_GenerateSTART
  45:./Tools/Src/i2c.c **** 	while(!I2C_CheckEvent(I2C1,I2C_EVENT_MASTER_MODE_SELECT)); //ç­‰å¾…å®Œæˆ	 
 285              		.loc 1 45 7
 286 001a 00BF     		nop
 287              	.L14:
 288              		.loc 1 45 9 discriminator 1
 289 001c 1C49     		ldr	r1, .L18+4
 290 001e 1B48     		ldr	r0, .L18
 291 0020 FFF7FEFF 		bl	I2C_CheckEvent
 292 0024 0346     		mov	r3, r0
 293              		.loc 1 45 8 discriminator 1
 294 0026 002B     		cmp	r3, #0
 295 0028 F8D0     		beq	.L14
  46:./Tools/Src/i2c.c **** 	I2C_Send7bitAddress(I2C1,SlaveAddr, I2C_Direction_Transmitter); //å‘é€ä»Žå™¨ä»¶åœ°å€åŠçŠ¶æ€ï¼
 296              		.loc 1 46 2
 297 002a FB79     		ldrb	r3, [r7, #7]	@ zero_extendqisi2
 298 002c 0022     		movs	r2, #0
 299 002e 1946     		mov	r1, r3
ARM GAS  /tmp/ccRy4LVN.s 			page 7


 300 0030 1648     		ldr	r0, .L18
 301 0032 FFF7FEFF 		bl	I2C_Send7bitAddress
  47:./Tools/Src/i2c.c **** 	while(!I2C_CheckEvent(I2C1,I2C_EVENT_MASTER_TRANSMITTER_MODE_SELECTED)); //ç­‰å¾…å®Œæˆ	
 302              		.loc 1 47 7
 303 0036 00BF     		nop
 304              	.L15:
 305              		.loc 1 47 9 discriminator 1
 306 0038 1649     		ldr	r1, .L18+8
 307 003a 1448     		ldr	r0, .L18
 308 003c FFF7FEFF 		bl	I2C_CheckEvent
 309 0040 0346     		mov	r3, r0
 310              		.loc 1 47 8 discriminator 1
 311 0042 002B     		cmp	r3, #0
 312 0044 F8D0     		beq	.L15
  48:./Tools/Src/i2c.c **** 	I2C_SendData(I2C1,writeAddr); //å‘é€ä»Žå™¨ä»¶å†…éƒ¨å¯„å­˜å™¨åœ°å€
 313              		.loc 1 48 2
 314 0046 BB79     		ldrb	r3, [r7, #6]	@ zero_extendqisi2
 315 0048 1946     		mov	r1, r3
 316 004a 1048     		ldr	r0, .L18
 317 004c FFF7FEFF 		bl	I2C_SendData
  49:./Tools/Src/i2c.c **** 	while(!I2C_CheckEvent(I2C1,I2C_EVENT_MASTER_BYTE_TRANSMITTED)); //ç­‰å¾…å®Œæˆ	
 318              		.loc 1 49 7
 319 0050 00BF     		nop
 320              	.L16:
 321              		.loc 1 49 9 discriminator 1
 322 0052 1149     		ldr	r1, .L18+12
 323 0054 0D48     		ldr	r0, .L18
 324 0056 FFF7FEFF 		bl	I2C_CheckEvent
 325 005a 0346     		mov	r3, r0
 326              		.loc 1 49 8 discriminator 1
 327 005c 002B     		cmp	r3, #0
 328 005e F8D0     		beq	.L16
  50:./Tools/Src/i2c.c **** 	I2C_SendData(I2C1,pBuffer); //å‘é€è¦å†™å…¥çš„å†…å®¹
 329              		.loc 1 50 2
 330 0060 7B79     		ldrb	r3, [r7, #5]	@ zero_extendqisi2
 331 0062 1946     		mov	r1, r3
 332 0064 0948     		ldr	r0, .L18
 333 0066 FFF7FEFF 		bl	I2C_SendData
  51:./Tools/Src/i2c.c **** 	while(!I2C_CheckEvent(I2C1,I2C_EVENT_MASTER_BYTE_TRANSMITTED)); //ç­‰å¾…å®Œæˆ	
 334              		.loc 1 51 7
 335 006a 00BF     		nop
 336              	.L17:
 337              		.loc 1 51 9 discriminator 1
 338 006c 0A49     		ldr	r1, .L18+12
 339 006e 0748     		ldr	r0, .L18
 340 0070 FFF7FEFF 		bl	I2C_CheckEvent
 341 0074 0346     		mov	r3, r0
 342              		.loc 1 51 8 discriminator 1
 343 0076 002B     		cmp	r3, #0
 344 0078 F8D0     		beq	.L17
  52:./Tools/Src/i2c.c **** 	I2C_GenerateSTOP(I2C1,ENABLE); //å‘é€ç»“æŸä¿¡å·
 345              		.loc 1 52 2
 346 007a 0121     		movs	r1, #1
 347 007c 0348     		ldr	r0, .L18
 348 007e FFF7FEFF 		bl	I2C_GenerateSTOP
  53:./Tools/Src/i2c.c **** 	
  54:./Tools/Src/i2c.c **** //	//äº§ç”Ÿå¼€å§‹ä¿¡å·
ARM GAS  /tmp/ccRy4LVN.s 			page 8


  55:./Tools/Src/i2c.c **** //	I2C1->CR1|=0x01<<8;
  56:./Tools/Src/i2c.c **** //	while(!MY_CHECK_EVENT(0x0001,0x0003));
  57:./Tools/Src/i2c.c **** //	//å› ä¸ºæ˜¯å†™ï¼Œæ‰€ä»¥ä¸ç”¨ç»™åœ°å€åŠ ä¸€
  58:./Tools/Src/i2c.c **** //	I2C1->DR=SlaveAddr;
  59:./Tools/Src/i2c.c **** //	while(!MY_CHECK_EVENT(0x0082,0x0007));
  60:./Tools/Src/i2c.c **** //	I2C1->DR = writeAddr;
  61:./Tools/Src/i2c.c **** //	while(!MY_CHECK_EVENT(0x0084,0x0007));
  62:./Tools/Src/i2c.c **** //	I2C1->DR = pBuffer;
  63:./Tools/Src/i2c.c **** //	while(!MY_CHECK_EVENT(0x0084,0x0007));
  64:./Tools/Src/i2c.c **** //	//äº§ç”Ÿç»“æŸä¿¡å·
  65:./Tools/Src/i2c.c **** //	I2C1->CR1|=0x01<<9;
  66:./Tools/Src/i2c.c **** 	
  67:./Tools/Src/i2c.c **** }
 349              		.loc 1 67 1
 350 0082 00BF     		nop
 351 0084 0837     		adds	r7, r7, #8
 352              		.cfi_def_cfa_offset 8
 353 0086 BD46     		mov	sp, r7
 354              		.cfi_def_cfa_register 13
 355              		@ sp needed
 356 0088 80BD     		pop	{r7, pc}
 357              	.L19:
 358 008a 00BF     		.align	2
 359              	.L18:
 360 008c 00540040 		.word	1073763328
 361 0090 01000300 		.word	196609
 362 0094 82000700 		.word	458882
 363 0098 84000700 		.word	458884
 364              		.cfi_endproc
 365              	.LFE125:
 367              		.section	.text.I2C_READ_BUFFER,"ax",%progbits
 368              		.align	1
 369              		.global	I2C_READ_BUFFER
 370              		.syntax unified
 371              		.thumb
 372              		.thumb_func
 374              	I2C_READ_BUFFER:
 375              	.LFB126:
  68:./Tools/Src/i2c.c **** 
  69:./Tools/Src/i2c.c **** void I2C_READ_BUFFER(u8 SlaveAddr,u8 readAddr,u8* pBuffer,u16 NumByteToRead){ //I2Cè¯»å–æ•°æ®ä¸²ï
 376              		.loc 1 69 77
 377              		.cfi_startproc
 378              		@ args = 0, pretend = 0, frame = 8
 379              		@ frame_needed = 1, uses_anonymous_args = 0
 380 0000 80B5     		push	{r7, lr}
 381              		.cfi_def_cfa_offset 8
 382              		.cfi_offset 7, -8
 383              		.cfi_offset 14, -4
 384 0002 82B0     		sub	sp, sp, #8
 385              		.cfi_def_cfa_offset 16
 386 0004 00AF     		add	r7, sp, #0
 387              		.cfi_def_cfa_register 7
 388 0006 3A60     		str	r2, [r7]
 389 0008 1A46     		mov	r2, r3
 390 000a 0346     		mov	r3, r0
 391 000c FB71     		strb	r3, [r7, #7]
 392 000e 0B46     		mov	r3, r1
ARM GAS  /tmp/ccRy4LVN.s 			page 9


 393 0010 BB71     		strb	r3, [r7, #6]
 394 0012 1346     		mov	r3, r2	@ movhi
 395 0014 BB80     		strh	r3, [r7, #4]	@ movhi
  70:./Tools/Src/i2c.c **** 	while(I2C_GetFlagStatus(I2C1,I2C_FLAG_BUSY));
 396              		.loc 1 70 7
 397 0016 00BF     		nop
 398              	.L21:
 399              		.loc 1 70 8 discriminator 1
 400 0018 4FF40031 		mov	r1, #131072
 401 001c 3A48     		ldr	r0, .L31
 402 001e FFF7FEFF 		bl	I2C_GetFlagStatus
 403 0022 0346     		mov	r3, r0
 404 0024 002B     		cmp	r3, #0
 405 0026 F7D1     		bne	.L21
  71:./Tools/Src/i2c.c **** 	I2C_GenerateSTART(I2C1,ENABLE);//å¼€å¯ä¿¡å·
 406              		.loc 1 71 2
 407 0028 0121     		movs	r1, #1
 408 002a 3748     		ldr	r0, .L31
 409 002c FFF7FEFF 		bl	I2C_GenerateSTART
  72:./Tools/Src/i2c.c **** 	
  73:./Tools/Src/i2c.c **** 	while(!I2C_CheckEvent(I2C1,I2C_EVENT_MASTER_MODE_SELECT));	//æ¸…é™¤ EV5
 410              		.loc 1 73 7
 411 0030 00BF     		nop
 412              	.L22:
 413              		.loc 1 73 9 discriminator 1
 414 0032 3649     		ldr	r1, .L31+4
 415 0034 3448     		ldr	r0, .L31
 416 0036 FFF7FEFF 		bl	I2C_CheckEvent
 417 003a 0346     		mov	r3, r0
 418              		.loc 1 73 8 discriminator 1
 419 003c 002B     		cmp	r3, #0
 420 003e F8D0     		beq	.L22
  74:./Tools/Src/i2c.c **** 	I2C_Send7bitAddress(I2C1,SlaveAddr, I2C_Direction_Transmitter); //å†™å…¥å™¨ä»¶åœ°å€
 421              		.loc 1 74 2
 422 0040 FB79     		ldrb	r3, [r7, #7]	@ zero_extendqisi2
 423 0042 0022     		movs	r2, #0
 424 0044 1946     		mov	r1, r3
 425 0046 3048     		ldr	r0, .L31
 426 0048 FFF7FEFF 		bl	I2C_Send7bitAddress
  75:./Tools/Src/i2c.c **** 	
  76:./Tools/Src/i2c.c **** 	while(!I2C_CheckEvent(I2C1,I2C_EVENT_MASTER_TRANSMITTER_MODE_SELECTED));//æ¸…é™¤ EV6
 427              		.loc 1 76 7
 428 004c 00BF     		nop
 429              	.L23:
 430              		.loc 1 76 9 discriminator 1
 431 004e 3049     		ldr	r1, .L31+8
 432 0050 2D48     		ldr	r0, .L31
 433 0052 FFF7FEFF 		bl	I2C_CheckEvent
 434 0056 0346     		mov	r3, r0
 435              		.loc 1 76 8 discriminator 1
 436 0058 002B     		cmp	r3, #0
 437 005a F8D0     		beq	.L23
  77:./Tools/Src/i2c.c **** 	I2C_Cmd(I2C1,ENABLE);
 438              		.loc 1 77 2
 439 005c 0121     		movs	r1, #1
 440 005e 2A48     		ldr	r0, .L31
 441 0060 FFF7FEFF 		bl	I2C_Cmd
ARM GAS  /tmp/ccRy4LVN.s 			page 10


  78:./Tools/Src/i2c.c **** 	I2C_SendData(I2C1,readAddr); //å‘é€è¯»çš„åœ°å€
 442              		.loc 1 78 2
 443 0064 BB79     		ldrb	r3, [r7, #6]	@ zero_extendqisi2
 444 0066 1946     		mov	r1, r3
 445 0068 2748     		ldr	r0, .L31
 446 006a FFF7FEFF 		bl	I2C_SendData
  79:./Tools/Src/i2c.c **** 	
  80:./Tools/Src/i2c.c **** 	while(!I2C_CheckEvent(I2C1,I2C_EVENT_MASTER_BYTE_TRANSMITTED)); //æ¸…é™¤ EV8
 447              		.loc 1 80 7
 448 006e 00BF     		nop
 449              	.L24:
 450              		.loc 1 80 9 discriminator 1
 451 0070 2849     		ldr	r1, .L31+12
 452 0072 2548     		ldr	r0, .L31
 453 0074 FFF7FEFF 		bl	I2C_CheckEvent
 454 0078 0346     		mov	r3, r0
 455              		.loc 1 80 8 discriminator 1
 456 007a 002B     		cmp	r3, #0
 457 007c F8D0     		beq	.L24
  81:./Tools/Src/i2c.c **** 	I2C_GenerateSTART(I2C1,ENABLE); //å¼€å¯ä¿¡å·
 458              		.loc 1 81 2
 459 007e 0121     		movs	r1, #1
 460 0080 2148     		ldr	r0, .L31
 461 0082 FFF7FEFF 		bl	I2C_GenerateSTART
  82:./Tools/Src/i2c.c **** 	
  83:./Tools/Src/i2c.c **** 	while(!I2C_CheckEvent(I2C1,I2C_EVENT_MASTER_MODE_SELECT)); //æ¸…é™¤ EV5
 462              		.loc 1 83 7
 463 0086 00BF     		nop
 464              	.L25:
 465              		.loc 1 83 9 discriminator 1
 466 0088 2049     		ldr	r1, .L31+4
 467 008a 1F48     		ldr	r0, .L31
 468 008c FFF7FEFF 		bl	I2C_CheckEvent
 469 0090 0346     		mov	r3, r0
 470              		.loc 1 83 8 discriminator 1
 471 0092 002B     		cmp	r3, #0
 472 0094 F8D0     		beq	.L25
  84:./Tools/Src/i2c.c **** 	I2C_Send7bitAddress(I2C1,SlaveAddr,I2C_Direction_Receiver); //å°†å™¨ä»¶åœ°å€ä¼ å‡ºï¼Œä¸»æœºä¸ºè¯»
 473              		.loc 1 84 2
 474 0096 FB79     		ldrb	r3, [r7, #7]	@ zero_extendqisi2
 475 0098 0122     		movs	r2, #1
 476 009a 1946     		mov	r1, r3
 477 009c 1A48     		ldr	r0, .L31
 478 009e FFF7FEFF 		bl	I2C_Send7bitAddress
  85:./Tools/Src/i2c.c **** 	
  86:./Tools/Src/i2c.c **** 	while(!I2C_CheckEvent(I2C1,I2C_EVENT_MASTER_RECEIVER_MODE_SELECTED)); //æ¸…é™¤EV6
 479              		.loc 1 86 7
 480 00a2 00BF     		nop
 481              	.L26:
 482              		.loc 1 86 9 discriminator 1
 483 00a4 1C49     		ldr	r1, .L31+16
 484 00a6 1848     		ldr	r0, .L31
 485 00a8 FFF7FEFF 		bl	I2C_CheckEvent
 486 00ac 0346     		mov	r3, r0
 487              		.loc 1 86 8 discriminator 1
 488 00ae 002B     		cmp	r3, #0
 489 00b0 F8D0     		beq	.L26
ARM GAS  /tmp/ccRy4LVN.s 			page 11


  87:./Tools/Src/i2c.c **** 	while(NumByteToRead){
 490              		.loc 1 87 7
 491 00b2 1EE0     		b	.L29
 492              	.L30:
  88:./Tools/Src/i2c.c **** 		if(NumByteToRead == 1){ //åªå‰©ä¸‹æœ€åŽä¸€ä¸ªæ•°æ®æ—¶è¿›å…¥ if è¯­å¥
 493              		.loc 1 88 5
 494 00b4 BB88     		ldrh	r3, [r7, #4]
 495 00b6 012B     		cmp	r3, #1
 496 00b8 07D1     		bne	.L28
  89:./Tools/Src/i2c.c **** 			I2C_AcknowledgeConfig(I2C1,DISABLE); //æœ€åŽæœ‰ä¸€ä¸ªæ•°æ®æ—¶å…³é—­åº”ç­”ä½
 497              		.loc 1 89 4
 498 00ba 0021     		movs	r1, #0
 499 00bc 1248     		ldr	r0, .L31
 500 00be FFF7FEFF 		bl	I2C_AcknowledgeConfig
  90:./Tools/Src/i2c.c **** 			I2C_GenerateSTOP(I2C1,ENABLE);	//æœ€åŽä¸€ä¸ªæ•°æ®æ—¶ä½¿èƒ½åœæ­¢ä½
 501              		.loc 1 90 4
 502 00c2 0121     		movs	r1, #1
 503 00c4 1048     		ldr	r0, .L31
 504 00c6 FFF7FEFF 		bl	I2C_GenerateSTOP
 505              	.L28:
  91:./Tools/Src/i2c.c **** 		}
  92:./Tools/Src/i2c.c **** 		if(I2C_CheckEvent(I2C1,I2C_EVENT_MASTER_BYTE_RECEIVED)){ //è¯»å–æ•°æ®
 506              		.loc 1 92 6
 507 00ca 1449     		ldr	r1, .L31+20
 508 00cc 0E48     		ldr	r0, .L31
 509 00ce FFF7FEFF 		bl	I2C_CheckEvent
 510 00d2 0346     		mov	r3, r0
 511              		.loc 1 92 5
 512 00d4 002B     		cmp	r3, #0
 513 00d6 0CD0     		beq	.L29
  93:./Tools/Src/i2c.c **** 			*pBuffer = I2C_ReceiveData(I2C1);//è°ƒç”¨åº“å‡½æ•°å°†æ•°æ®å–å‡ºåˆ° pBuffer
 514              		.loc 1 93 15
 515 00d8 0B48     		ldr	r0, .L31
 516 00da FFF7FEFF 		bl	I2C_ReceiveData
 517 00de 0346     		mov	r3, r0
 518 00e0 1A46     		mov	r2, r3
 519              		.loc 1 93 13
 520 00e2 3B68     		ldr	r3, [r7]
 521 00e4 1A70     		strb	r2, [r3]
  94:./Tools/Src/i2c.c **** 			pBuffer++; //æŒ‡é’ˆç§»ä½
 522              		.loc 1 94 11
 523 00e6 3B68     		ldr	r3, [r7]
 524 00e8 0133     		adds	r3, r3, #1
 525 00ea 3B60     		str	r3, [r7]
  95:./Tools/Src/i2c.c **** 			NumByteToRead--; //å­—èŠ‚æ•°å‡ 1 
 526              		.loc 1 95 17
 527 00ec BB88     		ldrh	r3, [r7, #4]
 528 00ee 013B     		subs	r3, r3, #1
 529 00f0 BB80     		strh	r3, [r7, #4]	@ movhi
 530              	.L29:
  87:./Tools/Src/i2c.c **** 		if(NumByteToRead == 1){ //åªå‰©ä¸‹æœ€åŽä¸€ä¸ªæ•°æ®æ—¶è¿›å…¥ if è¯­å¥
 531              		.loc 1 87 8
 532 00f2 BB88     		ldrh	r3, [r7, #4]
 533 00f4 002B     		cmp	r3, #0
 534 00f6 DDD1     		bne	.L30
  96:./Tools/Src/i2c.c **** 		}
  97:./Tools/Src/i2c.c **** 	}
ARM GAS  /tmp/ccRy4LVN.s 			page 12


  98:./Tools/Src/i2c.c **** 	I2C_AcknowledgeConfig(I2C1,ENABLE);
 535              		.loc 1 98 2
 536 00f8 0121     		movs	r1, #1
 537 00fa 0348     		ldr	r0, .L31
 538 00fc FFF7FEFF 		bl	I2C_AcknowledgeConfig
  99:./Tools/Src/i2c.c **** 	
 100:./Tools/Src/i2c.c **** }
 539              		.loc 1 100 1
 540 0100 00BF     		nop
 541 0102 0837     		adds	r7, r7, #8
 542              		.cfi_def_cfa_offset 8
 543 0104 BD46     		mov	sp, r7
 544              		.cfi_def_cfa_register 13
 545              		@ sp needed
 546 0106 80BD     		pop	{r7, pc}
 547              	.L32:
 548              		.align	2
 549              	.L31:
 550 0108 00540040 		.word	1073763328
 551 010c 01000300 		.word	196609
 552 0110 82000700 		.word	458882
 553 0114 84000700 		.word	458884
 554 0118 02000300 		.word	196610
 555 011c 40000300 		.word	196672
 556              		.cfi_endproc
 557              	.LFE126:
 559              		.section	.text.I2C_READ_BYTE,"ax",%progbits
 560              		.align	1
 561              		.global	I2C_READ_BYTE
 562              		.syntax unified
 563              		.thumb
 564              		.thumb_func
 566              	I2C_READ_BYTE:
 567              	.LFB127:
 101:./Tools/Src/i2c.c **** 
 102:./Tools/Src/i2c.c **** u8 I2C_READ_BYTE(u8 SlaveAddr,u8 readAddr){ //I2Cè¯»å–ä¸€ä¸ªå­—èŠ‚
 568              		.loc 1 102 43
 569              		.cfi_startproc
 570              		@ args = 0, pretend = 0, frame = 16
 571              		@ frame_needed = 1, uses_anonymous_args = 0
 572 0000 80B5     		push	{r7, lr}
 573              		.cfi_def_cfa_offset 8
 574              		.cfi_offset 7, -8
 575              		.cfi_offset 14, -4
 576 0002 84B0     		sub	sp, sp, #16
 577              		.cfi_def_cfa_offset 24
 578 0004 00AF     		add	r7, sp, #0
 579              		.cfi_def_cfa_register 7
 580 0006 0346     		mov	r3, r0
 581 0008 0A46     		mov	r2, r1
 582 000a FB71     		strb	r3, [r7, #7]
 583 000c 1346     		mov	r3, r2
 584 000e BB71     		strb	r3, [r7, #6]
 103:./Tools/Src/i2c.c **** 	u8 a;
 104:./Tools/Src/i2c.c **** 	while(I2C_GetFlagStatus(I2C1,I2C_FLAG_BUSY));
 585              		.loc 1 104 7
 586 0010 00BF     		nop
ARM GAS  /tmp/ccRy4LVN.s 			page 13


 587              	.L34:
 588              		.loc 1 104 8 discriminator 1
 589 0012 4FF40031 		mov	r1, #131072
 590 0016 3448     		ldr	r0, .L42
 591 0018 FFF7FEFF 		bl	I2C_GetFlagStatus
 592 001c 0346     		mov	r3, r0
 593 001e 002B     		cmp	r3, #0
 594 0020 F7D1     		bne	.L34
 105:./Tools/Src/i2c.c **** 	I2C_GenerateSTART(I2C1,ENABLE);
 595              		.loc 1 105 2
 596 0022 0121     		movs	r1, #1
 597 0024 3048     		ldr	r0, .L42
 598 0026 FFF7FEFF 		bl	I2C_GenerateSTART
 106:./Tools/Src/i2c.c **** 	
 107:./Tools/Src/i2c.c **** 	while(!I2C_CheckEvent(I2C1,I2C_EVENT_MASTER_MODE_SELECT));
 599              		.loc 1 107 7
 600 002a 00BF     		nop
 601              	.L35:
 602              		.loc 1 107 9 discriminator 1
 603 002c 2F49     		ldr	r1, .L42+4
 604 002e 2E48     		ldr	r0, .L42
 605 0030 FFF7FEFF 		bl	I2C_CheckEvent
 606 0034 0346     		mov	r3, r0
 607              		.loc 1 107 8 discriminator 1
 608 0036 002B     		cmp	r3, #0
 609 0038 F8D0     		beq	.L35
 108:./Tools/Src/i2c.c **** 	I2C_Send7bitAddress(I2C1,SlaveAddr, I2C_Direction_Transmitter); 
 610              		.loc 1 108 2
 611 003a FB79     		ldrb	r3, [r7, #7]	@ zero_extendqisi2
 612 003c 0022     		movs	r2, #0
 613 003e 1946     		mov	r1, r3
 614 0040 2948     		ldr	r0, .L42
 615 0042 FFF7FEFF 		bl	I2C_Send7bitAddress
 109:./Tools/Src/i2c.c **** 	
 110:./Tools/Src/i2c.c **** 	while(!I2C_CheckEvent(I2C1,I2C_EVENT_MASTER_TRANSMITTER_MODE_SELECTED));
 616              		.loc 1 110 7
 617 0046 00BF     		nop
 618              	.L36:
 619              		.loc 1 110 9 discriminator 1
 620 0048 2949     		ldr	r1, .L42+8
 621 004a 2748     		ldr	r0, .L42
 622 004c FFF7FEFF 		bl	I2C_CheckEvent
 623 0050 0346     		mov	r3, r0
 624              		.loc 1 110 8 discriminator 1
 625 0052 002B     		cmp	r3, #0
 626 0054 F8D0     		beq	.L36
 111:./Tools/Src/i2c.c **** 	I2C_Cmd(I2C1,ENABLE);
 627              		.loc 1 111 2
 628 0056 0121     		movs	r1, #1
 629 0058 2348     		ldr	r0, .L42
 630 005a FFF7FEFF 		bl	I2C_Cmd
 112:./Tools/Src/i2c.c **** 	I2C_SendData(I2C1,readAddr);
 631              		.loc 1 112 2
 632 005e BB79     		ldrb	r3, [r7, #6]	@ zero_extendqisi2
 633 0060 1946     		mov	r1, r3
 634 0062 2148     		ldr	r0, .L42
 635 0064 FFF7FEFF 		bl	I2C_SendData
ARM GAS  /tmp/ccRy4LVN.s 			page 14


 113:./Tools/Src/i2c.c **** 	
 114:./Tools/Src/i2c.c **** 	while(!I2C_CheckEvent(I2C1,I2C_EVENT_MASTER_BYTE_TRANSMITTED));
 636              		.loc 1 114 7
 637 0068 00BF     		nop
 638              	.L37:
 639              		.loc 1 114 9 discriminator 1
 640 006a 2249     		ldr	r1, .L42+12
 641 006c 1E48     		ldr	r0, .L42
 642 006e FFF7FEFF 		bl	I2C_CheckEvent
 643 0072 0346     		mov	r3, r0
 644              		.loc 1 114 8 discriminator 1
 645 0074 002B     		cmp	r3, #0
 646 0076 F8D0     		beq	.L37
 115:./Tools/Src/i2c.c **** 	I2C_GenerateSTART(I2C1,ENABLE);
 647              		.loc 1 115 2
 648 0078 0121     		movs	r1, #1
 649 007a 1B48     		ldr	r0, .L42
 650 007c FFF7FEFF 		bl	I2C_GenerateSTART
 116:./Tools/Src/i2c.c **** 	
 117:./Tools/Src/i2c.c **** 	while(!I2C_CheckEvent(I2C1,I2C_EVENT_MASTER_MODE_SELECT));
 651              		.loc 1 117 7
 652 0080 00BF     		nop
 653              	.L38:
 654              		.loc 1 117 9 discriminator 1
 655 0082 1A49     		ldr	r1, .L42+4
 656 0084 1848     		ldr	r0, .L42
 657 0086 FFF7FEFF 		bl	I2C_CheckEvent
 658 008a 0346     		mov	r3, r0
 659              		.loc 1 117 8 discriminator 1
 660 008c 002B     		cmp	r3, #0
 661 008e F8D0     		beq	.L38
 118:./Tools/Src/i2c.c **** 	I2C_Send7bitAddress(I2C1,SlaveAddr, I2C_Direction_Receiver);
 662              		.loc 1 118 2
 663 0090 FB79     		ldrb	r3, [r7, #7]	@ zero_extendqisi2
 664 0092 0122     		movs	r2, #1
 665 0094 1946     		mov	r1, r3
 666 0096 1448     		ldr	r0, .L42
 667 0098 FFF7FEFF 		bl	I2C_Send7bitAddress
 119:./Tools/Src/i2c.c **** 	
 120:./Tools/Src/i2c.c **** 	while(!I2C_CheckEvent(I2C1,I2C_EVENT_MASTER_RECEIVER_MODE_SELECTED));
 668              		.loc 1 120 7
 669 009c 00BF     		nop
 670              	.L39:
 671              		.loc 1 120 9 discriminator 1
 672 009e 1649     		ldr	r1, .L42+16
 673 00a0 1148     		ldr	r0, .L42
 674 00a2 FFF7FEFF 		bl	I2C_CheckEvent
 675 00a6 0346     		mov	r3, r0
 676              		.loc 1 120 8 discriminator 1
 677 00a8 002B     		cmp	r3, #0
 678 00aa F8D0     		beq	.L39
 121:./Tools/Src/i2c.c **** 	
 122:./Tools/Src/i2c.c **** 	I2C_AcknowledgeConfig(I2C1,DISABLE); //æœ€åŽæœ‰ä¸€ä¸ªæ•°æ®æ—¶å…³é—­åº”ç­”ä½
 679              		.loc 1 122 2
 680 00ac 0021     		movs	r1, #0
 681 00ae 0E48     		ldr	r0, .L42
 682 00b0 FFF7FEFF 		bl	I2C_AcknowledgeConfig
ARM GAS  /tmp/ccRy4LVN.s 			page 15


 123:./Tools/Src/i2c.c **** 	I2C_GenerateSTOP(I2C1,ENABLE);
 683              		.loc 1 123 2
 684 00b4 0121     		movs	r1, #1
 685 00b6 0C48     		ldr	r0, .L42
 686 00b8 FFF7FEFF 		bl	I2C_GenerateSTOP
 124:./Tools/Src/i2c.c **** 
 125:./Tools/Src/i2c.c **** 
 126:./Tools/Src/i2c.c **** 	while(!I2C_CheckEvent(I2C1,I2C_EVENT_MASTER_BYTE_RECEIVED));
 687              		.loc 1 126 7
 688 00bc 00BF     		nop
 689              	.L40:
 690              		.loc 1 126 9 discriminator 1
 691 00be 0F49     		ldr	r1, .L42+20
 692 00c0 0948     		ldr	r0, .L42
 693 00c2 FFF7FEFF 		bl	I2C_CheckEvent
 694 00c6 0346     		mov	r3, r0
 695              		.loc 1 126 8 discriminator 1
 696 00c8 002B     		cmp	r3, #0
 697 00ca F8D0     		beq	.L40
 127:./Tools/Src/i2c.c **** 	a = I2C_ReceiveData(I2C1);
 698              		.loc 1 127 6
 699 00cc 0648     		ldr	r0, .L42
 700 00ce FFF7FEFF 		bl	I2C_ReceiveData
 701 00d2 0346     		mov	r3, r0
 702 00d4 FB73     		strb	r3, [r7, #15]
 128:./Tools/Src/i2c.c **** 	I2C_AcknowledgeConfig(I2C1,ENABLE);
 703              		.loc 1 128 2
 704 00d6 0121     		movs	r1, #1
 705 00d8 0348     		ldr	r0, .L42
 706 00da FFF7FEFF 		bl	I2C_AcknowledgeConfig
 129:./Tools/Src/i2c.c **** 		
 130:./Tools/Src/i2c.c **** 	return a;
 707              		.loc 1 130 9
 708 00de FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
 131:./Tools/Src/i2c.c **** }
 709              		.loc 1 131 1
 710 00e0 1846     		mov	r0, r3
 711 00e2 1037     		adds	r7, r7, #16
 712              		.cfi_def_cfa_offset 8
 713 00e4 BD46     		mov	sp, r7
 714              		.cfi_def_cfa_register 13
 715              		@ sp needed
 716 00e6 80BD     		pop	{r7, pc}
 717              	.L43:
 718              		.align	2
 719              	.L42:
 720 00e8 00540040 		.word	1073763328
 721 00ec 01000300 		.word	196609
 722 00f0 82000700 		.word	458882
 723 00f4 84000700 		.word	458884
 724 00f8 02000300 		.word	196610
 725 00fc 40000300 		.word	196672
 726              		.cfi_endproc
 727              	.LFE127:
 729              		.section	.text.MY_CHECK_EVENT,"ax",%progbits
 730              		.align	1
 731              		.global	MY_CHECK_EVENT
ARM GAS  /tmp/ccRy4LVN.s 			page 16


 732              		.syntax unified
 733              		.thumb
 734              		.thumb_func
 736              	MY_CHECK_EVENT:
 737              	.LFB128:
 132:./Tools/Src/i2c.c **** 
 133:./Tools/Src/i2c.c **** uint8_t MY_CHECK_EVENT(uint16_t SR1,uint16_t SR2)
 134:./Tools/Src/i2c.c **** {
 738              		.loc 1 134 1
 739              		.cfi_startproc
 740              		@ args = 0, pretend = 0, frame = 8
 741              		@ frame_needed = 1, uses_anonymous_args = 0
 742              		@ link register save eliminated.
 743 0000 80B4     		push	{r7}
 744              		.cfi_def_cfa_offset 4
 745              		.cfi_offset 7, -4
 746 0002 83B0     		sub	sp, sp, #12
 747              		.cfi_def_cfa_offset 16
 748 0004 00AF     		add	r7, sp, #0
 749              		.cfi_def_cfa_register 7
 750 0006 0346     		mov	r3, r0
 751 0008 0A46     		mov	r2, r1
 752 000a FB80     		strh	r3, [r7, #6]	@ movhi
 753 000c 1346     		mov	r3, r2	@ movhi
 754 000e BB80     		strh	r3, [r7, #4]	@ movhi
 135:./Tools/Src/i2c.c **** 	//å…ˆè¯»å–SR1ï¼Œåªæœ‰ADDRè¢«ç½®ä½å¹¶ä¸”STOPFè¢«æ¸…é™¤æ‰å¯ä»¥è¯»å–SR2çš„å€¼
 136:./Tools/Src/i2c.c **** 	if( (I2C1->SR1&0x02 ) || !(I2C1->SR1&0x10) )
 755              		.loc 1 136 11
 756 0010 154B     		ldr	r3, .L49
 757 0012 9B8A     		ldrh	r3, [r3, #20]	@ movhi
 758 0014 9BB2     		uxth	r3, r3
 759              		.loc 1 136 16
 760 0016 03F00203 		and	r3, r3, #2
 761              		.loc 1 136 4
 762 001a 002B     		cmp	r3, #0
 763 001c 06D1     		bne	.L45
 764              		.loc 1 136 33 discriminator 1
 765 001e 124B     		ldr	r3, .L49
 766 0020 9B8A     		ldrh	r3, [r3, #20]	@ movhi
 767 0022 9BB2     		uxth	r3, r3
 768              		.loc 1 136 38 discriminator 1
 769 0024 03F01003 		and	r3, r3, #16
 770              		.loc 1 136 24 discriminator 1
 771 0028 002B     		cmp	r3, #0
 772 002a 15D1     		bne	.L46
 773              	.L45:
 137:./Tools/Src/i2c.c **** 	{
 138:./Tools/Src/i2c.c **** 		if( ( (I2C1->SR1 & SR1)==SR1 ) && ( (I2C1->SR2 & SR2)==SR2 ) )
 774              		.loc 1 138 14
 775 002c 0E4B     		ldr	r3, .L49
 776 002e 9B8A     		ldrh	r3, [r3, #20]	@ movhi
 777 0030 9AB2     		uxth	r2, r3
 778              		.loc 1 138 26
 779 0032 FB88     		ldrh	r3, [r7, #6]	@ movhi
 780 0034 1340     		ands	r3, r3, r2
 781 0036 9BB2     		uxth	r3, r3
 782              		.loc 1 138 5
ARM GAS  /tmp/ccRy4LVN.s 			page 17


 783 0038 FA88     		ldrh	r2, [r7, #6]
 784 003a 9A42     		cmp	r2, r3
 785 003c 0AD1     		bne	.L47
 786              		.loc 1 138 44 discriminator 1
 787 003e 0A4B     		ldr	r3, .L49
 788 0040 1B8B     		ldrh	r3, [r3, #24]	@ movhi
 789 0042 9AB2     		uxth	r2, r3
 790              		.loc 1 138 56 discriminator 1
 791 0044 BB88     		ldrh	r3, [r7, #4]	@ movhi
 792 0046 1340     		ands	r3, r3, r2
 793 0048 9BB2     		uxth	r3, r3
 794              		.loc 1 138 34 discriminator 1
 795 004a BA88     		ldrh	r2, [r7, #4]
 796 004c 9A42     		cmp	r2, r3
 797 004e 01D1     		bne	.L47
 139:./Tools/Src/i2c.c **** 			return 1;
 798              		.loc 1 139 11
 799 0050 0123     		movs	r3, #1
 800 0052 02E0     		b	.L48
 801              	.L47:
 140:./Tools/Src/i2c.c **** 		else
 141:./Tools/Src/i2c.c **** 			return 0;
 802              		.loc 1 141 11
 803 0054 0023     		movs	r3, #0
 804 0056 00E0     		b	.L48
 805              	.L46:
 142:./Tools/Src/i2c.c **** 	}
 143:./Tools/Src/i2c.c **** 	else
 144:./Tools/Src/i2c.c **** 	{
 145:./Tools/Src/i2c.c **** 		return 0;
 806              		.loc 1 145 10
 807 0058 0023     		movs	r3, #0
 808              	.L48:
 146:./Tools/Src/i2c.c **** 	}
 147:./Tools/Src/i2c.c **** }
 809              		.loc 1 147 1
 810 005a 1846     		mov	r0, r3
 811 005c 0C37     		adds	r7, r7, #12
 812              		.cfi_def_cfa_offset 4
 813 005e BD46     		mov	sp, r7
 814              		.cfi_def_cfa_register 13
 815              		@ sp needed
 816 0060 5DF8047B 		ldr	r7, [sp], #4
 817              		.cfi_restore 7
 818              		.cfi_def_cfa_offset 0
 819 0064 7047     		bx	lr
 820              	.L50:
 821 0066 00BF     		.align	2
 822              	.L49:
 823 0068 00540040 		.word	1073763328
 824              		.cfi_endproc
 825              	.LFE128:
 827              		.text
 828              	.Letext0:
 829              		.file 2 "/usr/lib/gcc/arm-none-eabi/12.2.1/include/stdint.h"
 830              		.file 3 "./Start/stm32f4xx.h"
 831              		.file 4 "./Lib/inc/stm32f4xx_gpio.h"
ARM GAS  /tmp/ccRy4LVN.s 			page 18


 832              		.file 5 "./Lib/inc/stm32f4xx_i2c.h"
 833              		.file 6 "./Lib/inc/stm32f4xx_rcc.h"
ARM GAS  /tmp/ccRy4LVN.s 			page 19


DEFINED SYMBOLS
                            *ABS*:0000000000000000 i2c.c
     /tmp/ccRy4LVN.s:21     .text.I2C_Configuration:0000000000000000 $t
     /tmp/ccRy4LVN.s:27     .text.I2C_Configuration:0000000000000000 I2C_Configuration
     /tmp/ccRy4LVN.s:117    .text.I2C_Configuration:0000000000000088 $d
     /tmp/ccRy4LVN.s:124    .text.I2C_SEND_BUFFER:0000000000000000 $t
     /tmp/ccRy4LVN.s:130    .text.I2C_SEND_BUFFER:0000000000000000 I2C_SEND_BUFFER
     /tmp/ccRy4LVN.s:247    .text.I2C_SEND_BUFFER:00000000000000a4 $d
     /tmp/ccRy4LVN.s:255    .text.I2C_SEND_BYTE:0000000000000000 $t
     /tmp/ccRy4LVN.s:261    .text.I2C_SEND_BYTE:0000000000000000 I2C_SEND_BYTE
     /tmp/ccRy4LVN.s:360    .text.I2C_SEND_BYTE:000000000000008c $d
     /tmp/ccRy4LVN.s:368    .text.I2C_READ_BUFFER:0000000000000000 $t
     /tmp/ccRy4LVN.s:374    .text.I2C_READ_BUFFER:0000000000000000 I2C_READ_BUFFER
     /tmp/ccRy4LVN.s:550    .text.I2C_READ_BUFFER:0000000000000108 $d
     /tmp/ccRy4LVN.s:560    .text.I2C_READ_BYTE:0000000000000000 $t
     /tmp/ccRy4LVN.s:566    .text.I2C_READ_BYTE:0000000000000000 I2C_READ_BYTE
     /tmp/ccRy4LVN.s:720    .text.I2C_READ_BYTE:00000000000000e8 $d
     /tmp/ccRy4LVN.s:730    .text.MY_CHECK_EVENT:0000000000000000 $t
     /tmp/ccRy4LVN.s:736    .text.MY_CHECK_EVENT:0000000000000000 MY_CHECK_EVENT
     /tmp/ccRy4LVN.s:823    .text.MY_CHECK_EVENT:0000000000000068 $d

UNDEFINED SYMBOLS
RCC_APB1PeriphClockCmd
RCC_AHB1PeriphClockCmd
GPIO_Init
GPIO_PinAFConfig
I2C_Init
I2C_Cmd
I2C_GenerateSTART
I2C_CheckEvent
I2C_Send7bitAddress
I2C_SendData
I2C_GenerateSTOP
I2C_GetFlagStatus
I2C_AcknowledgeConfig
I2C_ReceiveData
